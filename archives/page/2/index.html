<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/cat-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/cat-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"vic.kim","root":"/","images":"/images","scheme":"Gemini","version":"8.2.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}};
  </script>
<meta name="description" content="人生苦短，我学Python">
<meta property="og:type" content="website">
<meta property="og:title" content="Vicの博客">
<meta property="og:url" content="https://vic.kim/archives/page/2/index.html">
<meta property="og:site_name" content="Vicの博客">
<meta property="og:description" content="人生苦短，我学Python">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Vic">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://vic.kim/archives/page/2/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>
<title>Vicの博客</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Vicの博客</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">测试攻城狮</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">13</span></a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">12</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Vic"
      src="/images/smile.jpg">
  <p class="site-author-name" itemprop="name">Vic</p>
  <div class="site-description" itemprop="description">人生苦短，我学Python</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
        <div class="back-to-top animated" role="button">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

      
      <script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
      <script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
      <div class="widget-wrap">
          <h3 class="widget-title">Tag Cloud</h3>
          <div id="myCanvasContainer" class="widget tagcloud">
              <canvas width="250" height="250" id="resCanvas" style="width:100%">
                  <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/App%E8%87%AA%E5%8A%A8%E5%8C%96/" rel="tag">App自动化</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo-Next/" rel="tag">Hexo Next</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JMeter/" rel="tag">JMeter</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jenkins/" rel="tag">Jenkins</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UI/" rel="tag">UI</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%87%E5%BF%98/" rel="tag">备忘</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7/" rel="tag">工具</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95/" rel="tag">接口测试</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%A5%E5%8F%A3%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/" rel="tag">接口自动化测试</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A7%BB%E5%8A%A8%E6%80%A7%E8%83%BD/" rel="tag">移动性能</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/" rel="tag">设备管理</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B5%84%E6%96%99/" rel="tag">资料</a><span class="tag-list-count">8</span></li></ul>
              </canvas>
          </div>
      </div>
      

    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://vic.kim/2019/08/22/ATX2%E5%85%A5%E9%97%A8%E8%BF%9B%E9%98%B6%E5%BA%94%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/smile.jpg">
      <meta itemprop="name" content="Vic">
      <meta itemprop="description" content="人生苦短，我学Python">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Vicの博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/08/22/ATX2%E5%85%A5%E9%97%A8%E8%BF%9B%E9%98%B6%E5%BA%94%E7%94%A8/" class="post-title-link" itemprop="url">ATX2入门进阶应用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2019-08-22 17:29:38 / 修改时间：17:51:03" itemprop="dateCreated datePublished" datetime="2019-08-22T17:29:38+08:00">2019-08-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/App%E8%87%AA%E5%8A%A8%E5%8C%96/" itemprop="url" rel="index"><span itemprop="name">App自动化</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[TOC]</p>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>前面我们已经搭建好了ATX2平台来管理iOS设备，搭建博文参考:ATX2 iOS设备管理平台搭建 接下来分享一下该平台的入门进阶使用(还是基于iOS设备)。</p>
<h1 id="ATX2入门操作"><a href="#ATX2入门操作" class="headerlink" title="ATX2入门操作"></a>ATX2入门操作</h1><ul>
<li>打开登录地址：<a target="_blank" rel="noopener" href="http://172.28.xx.xx:4000/login">http://172.28.xx.xx:4000/login</a> 输入用户名登录ATX平台。</li>
<li>登录之后进入ATX2界面，在对应的设备点击<code>点击使用</code>则可以远程操作设备。</li>
<li>如下图所示，点击使用之后可以使用鼠标进行设备远程操作控制。<br><img src="/2019/08/22/ATX2%E5%85%A5%E9%97%A8%E8%BF%9B%E9%98%B6%E5%BA%94%E7%94%A8/atx2_iOS_action.gif" alt="示例图"></li>
</ul>
<blockquote>
<p>注意： iOS的弹窗不能通过屏幕点击来选择，需要在常用功能中点击“选择弹窗按钮”来进行操作</p>
</blockquote>
<h1 id="ATX2-API"><a href="#ATX2-API" class="headerlink" title="ATX2 API"></a>ATX2 API</h1><p>ATX2提供了API可以进行调用，可以方便我们在自动化测试过程中进行调用。<br>API文档地址：<a target="_blank" rel="noopener" href="https://github.com/openatx/atxserver2/blob/master/API.md">https://github.com/openatx/atxserver2/blob/master/API.md</a></p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="token获取"><a href="#token获取" class="headerlink" title="token获取"></a>token获取</h3><p>ATX2所有的接口采用<code>token</code>认证，<code>token</code>可以在<a target="_blank" rel="noopener" href="http://172.28.xx.xx:4000/user%E9%A1%B5%E9%9D%A2%E8%8E%B7%E5%8F%96%E5%88%B0">http://172.28.xx.xx:4000/user页面获取到</a><br>也可以点击右上角用户名-&gt;用户信息获取，如下图所示:<br><img src="/2019/08/22/ATX2%E5%85%A5%E9%97%A8%E8%BF%9B%E9%98%B6%E5%BA%94%E7%94%A8/token.png" alt="示例图"></p>
<h3 id="获取设备的udid"><a href="#获取设备的udid" class="headerlink" title="获取设备的udid"></a>获取设备的udid</h3><p>设备列表界面中的设备编号即为设备的<code>udid</code>，可以使用<code>libimobiledevice</code>命令获取设备的udid,命令如下：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">idevice_id</span> -l  <span class="comment"># 显示当前所连接的设备[udid]，包括 usb、WiFi 连接</span></span><br><span class="line">c06e788b2d8dc60004a7015ce5dad782</span><br></pre></td></tr></table></figure>
<h2 id="API封装"><a href="#API封装" class="headerlink" title="API封装"></a>API封装</h2><p>为了更好的调用API,我们可以进行封装方法，便于后续的调用。首先如下所示，我们定义一个类<code>AtxiOS</code> 这个类进行远程调用设备的初始化操作，如atx地址和token的初始化。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json,logging</span><br><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urljoin</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> pprint <span class="keyword">import</span> pprint</span><br><span class="line"></span><br><span class="line">logging.basicConfig(level=logging.INFO,</span><br><span class="line">                    <span class="built_in">format</span>=<span class="string">&#x27;%(asctime)s %(filename)s[line:%(lineno)d]%(levelname)s%(message)s&#x27;</span>)</span><br><span class="line"></span><br><span class="line">DEVICES_URL = <span class="string">&#x27;/api/v1/devices&#x27;</span> <span class="comment">#获取全部设备信息</span></span><br><span class="line">USER_DEVICES_URL = <span class="string">&#x27;/api/v1/user/devices&#x27;</span>  <span class="comment">#获取单台设备信息</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AtxiOS</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    封装ATX2接口用于设备远程操作</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">       <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, atx_url, token</span>):</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        初始化操作</span></span><br><span class="line"><span class="string">        :param atx_url: atx的url地址</span></span><br><span class="line"><span class="string">        :param token: 账户的token</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        self.atx_url = atx_url</span><br><span class="line">        self.token = token</span><br><span class="line">        self.session = requests.Session()</span><br><span class="line">        self.headers = <span class="built_in">dict</span>(Authorization=<span class="string">&quot;Bearer &#123;&#125;&quot;</span>.<span class="built_in">format</span>(self.token))</span><br><span class="line">        self.apply_devices = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_get_response</span>(<span class="params">self, url, method=<span class="string">&quot;GET&quot;</span>, headers=<span class="literal">None</span>, data=<span class="literal">None</span></span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        获取API响应结果</span></span><br><span class="line"><span class="string">        :param url:返回的url地址</span></span><br><span class="line"><span class="string">        :param method:请求方法</span></span><br><span class="line"><span class="string">        :param headers:响应header内容</span></span><br><span class="line"><span class="string">        :param data:响应的data内容</span></span><br><span class="line"><span class="string">        :return: 返回响应信息</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> headers:</span><br><span class="line">            headers = self.headers</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            response = self.session.request(method, url, headers=headers, data=data, timeout=<span class="number">20</span>)</span><br><span class="line">            info = response.json()</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> error:</span><br><span class="line">            logging.error(<span class="string">&#x27;网址：&#123;&#125;请求失败。&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(url, error))</span><br><span class="line">            info = &#123;<span class="string">&#x27;success&#x27;</span>: <span class="literal">False</span>, <span class="string">&#x27;description&#x27;</span>: <span class="string">&#x27;Bad request url: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(url)&#125;</span><br><span class="line">        <span class="keyword">return</span> info</span><br></pre></td></tr></table></figure>

<h2 id="获取所有iOS设备信息"><a href="#获取所有iOS设备信息" class="headerlink" title="获取所有iOS设备信息"></a>获取所有iOS设备信息</h2><p>在上面的<code>AtxiOS</code>类中定义如下方法用于获取所有iOS设备信息。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_all_iOS_devices</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    获取所有iOS设备</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    url = urljoin(self.atx_url, DEVICES_URL)</span><br><span class="line">    info = self._get_response(url=url)</span><br><span class="line">    pprint(info)</span><br><span class="line">    <span class="keyword">return</span> info</span><br></pre></td></tr></table></figure>
<p>然后调用定义好的方法</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ATX_URL</span> =&#x27;http://<span class="number">172</span>.<span class="number">28</span>.xx.xx:<span class="number">4000</span>&#x27;</span><br><span class="line"><span class="attribute">Token</span>=&#x27;xxxxxxxxx&#x27;</span><br><span class="line"><span class="attribute">udid</span>=&#x27;<span class="number">2</span>cced<span class="number">5</span>ac<span class="number">6</span>ad<span class="number">06</span>c<span class="number">35</span>e<span class="number">067460</span>dad<span class="number">5</span>ff<span class="number">417</span>f<span class="number">264</span>b<span class="number">8</span>ae&#x27;  #iphone<span class="number">7</span></span><br><span class="line"> </span><br><span class="line"><span class="attribute">atx</span>=AtxiOS(ATX_URL,Token)</span><br><span class="line"><span class="attribute">atx</span>.get_all_iOS_devices() #获取所有设备信息</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>调用之后返回结果如下：</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#x27;count&#x27;: <span class="number">4</span>,</span><br><span class="line"> &#x27;devices&#x27;: [&#123;&#x27;colding&#x27;: False,</span><br><span class="line">              &#x27;createdAt&#x27;: &#x27;<span class="number">2019-06-11</span>T16:57:17.<span class="number">371000</span>&#x27;,</span><br><span class="line">              &#x27;owner&#x27;: &#x27;&#x27;,</span><br><span class="line">              &#x27;platform&#x27;: &#x27;apple&#x27;,</span><br><span class="line">              &#x27;present&#x27;: False,</span><br><span class="line">              &#x27;properties&#x27;: &#123;&#x27;brand&#x27;: &#x27;Apple&#x27;,</span><br><span class="line">                             &#x27;name&#x27;: &#x27;&#x27;,</span><br><span class="line">                             &#x27;product&#x27;: &#x27;Unknown&#x27;&#125;,</span><br><span class="line">              &#x27;udid&#x27;: &#x27;ece<span class="number">8186</span>4b51f3e<span class="number">0535</span>bf86e9ab24f<span class="number">9209</span>e<span class="number">9727</span>f0&#x27;,</span><br><span class="line">              &#x27;updatedAt&#x27;: &#x27;<span class="number">2019-06-11</span>T16:58:33.<span class="number">049000</span>&#x27;&#125;,</span><br><span class="line">             &#123;&#x27;colding&#x27;: False,</span><br><span class="line">              &#x27;createdAt&#x27;: &#x27;<span class="number">2019-06-11</span>T10:17:43.<span class="number">340000</span>&#x27;,</span><br><span class="line">              &#x27;owner&#x27;: &#x27;&#x27;,</span><br><span class="line">              &#x27;platform&#x27;: &#x27;apple&#x27;,</span><br><span class="line">              &#x27;present&#x27;: False,</span><br><span class="line">              &#x27;properties&#x27;: &#123;&#x27;brand&#x27;: &#x27;Apple&#x27;,</span><br><span class="line">                             &#x27;name&#x27;: &#x27;&#x27;,</span><br><span class="line">                             &#x27;product&#x27;: &#x27;Unknown&#x27;&#125;,</span><br><span class="line">              &#x27;udid&#x27;: &#x27;6dd5e55bf<span class="number">4204</span>cd5ad<span class="number">8042</span>dc4ecb2b703bbdb435&#x27;,</span><br><span class="line">              &#x27;updatedAt&#x27;: &#x27;<span class="number">2019-06-11</span>T10:21:28.<span class="number">894000</span>&#x27;,</span><br><span class="line">              &#x27;using&#x27;: False&#125;,</span><br><span class="line">             &#123;&#x27;colding&#x27;: False,</span><br><span class="line">              &#x27;createdAt&#x27;: &#x27;<span class="number">2019-06-06</span>T08:54:42.<span class="number">115000</span>&#x27;,</span><br><span class="line">              &#x27;idleTimeout&#x27;: <span class="number">600</span>,</span><br><span class="line">              &#x27;lastActivatedAt&#x27;: &#x27;<span class="number">2019-06-10</span>T09:12:46.<span class="number">465000</span>&#x27;,</span><br><span class="line">              &#x27;owner&#x27;: &#x27;&#x27;,</span><br><span class="line">              &#x27;platform&#x27;: &#x27;apple&#x27;,</span><br><span class="line">              &#x27;present&#x27;: False,</span><br><span class="line">              &#x27;properties&#x27;: &#123;&#x27;brand&#x27;: &#x27;Apple&#x27;,</span><br><span class="line">                             &#x27;ip&#x27;: &#x27;172.28.212.16&#x27;,</span><br><span class="line">                             &#x27;name&#x27;: &#x27;iPhone6&#x27;,</span><br><span class="line">                             &#x27;product&#x27;: &#x27;iPhone 6&#x27;,</span><br><span class="line">                             &#x27;propertyId&#x27;: &#x27;<span class="number">1908090114</span>&#x27;,</span><br><span class="line">                             &#x27;sdkVersion&#x27;: &#x27;12.2&#x27;,</span><br><span class="line">                             &#x27;version&#x27;: &#x27;12.1.4&#x27;&#125;,</span><br><span class="line">              &#x27;udid&#x27;: &#x27;fa00fcc158dadb6bd1cc7c<span class="number">618540</span>ebd7c<span class="number">372352</span>0&#x27;,</span><br><span class="line">              &#x27;updatedAt&#x27;: &#x27;<span class="number">2019-06-10</span>T10:13:48.<span class="number">662000</span>&#x27;,</span><br><span class="line">              &#x27;userId&#x27;: None,</span><br><span class="line">              &#x27;using&#x27;: False,</span><br><span class="line">              &#x27;usingBeganAt&#x27;: &#x27;<span class="number">2019-06-10</span>T09:02:10.<span class="number">333000</span>&#x27;,</span><br><span class="line">              &#x27;usingDuration&#x27;: <span class="number">1041.401</span>&#125;,</span><br><span class="line">             &#123;&#x27;colding&#x27;: False,</span><br><span class="line">              &#x27;createdAt&#x27;: &#x27;<span class="number">2019-05-30</span>T21:39:47.<span class="number">708000</span>&#x27;,</span><br><span class="line">              &#x27;idleTimeout&#x27;: <span class="number">600</span>,</span><br><span class="line">              &#x27;lastActivatedAt&#x27;: &#x27;<span class="number">2019-06-11</span>T16:53:32.<span class="number">250000</span>&#x27;,</span><br><span class="line">              &#x27;owner&#x27;: &#x27;&#x27;,</span><br><span class="line">              &#x27;platform&#x27;: &#x27;apple&#x27;,</span><br><span class="line">              &#x27;present&#x27;: True,</span><br><span class="line">              &#x27;properties&#x27;: &#123;&#x27;brand&#x27;: &#x27;Apple&#x27;,</span><br><span class="line">                             &#x27;ip&#x27;: &#x27;172.28.213.231&#x27;,</span><br><span class="line">                             &#x27;name&#x27;: &#x27;iPhone 7&#x27;,</span><br><span class="line">                             &#x27;product&#x27;: &#x27;iPhone 7&#x27;,</span><br><span class="line">                             &#x27;propertyId&#x27;: &#x27;<span class="number">1908090112</span>&#x27;,</span><br><span class="line">                             &#x27;sdkVersion&#x27;: &#x27;12.2&#x27;,</span><br><span class="line">                             &#x27;version&#x27;: &#x27;12.1.4&#x27;&#125;,</span><br><span class="line">              &#x27;udid&#x27;: &#x27;2cced5ac6ad06c35e<span class="number">067460</span>dad5ff417f264b8ae&#x27;,</span><br><span class="line">              &#x27;updatedAt&#x27;: &#x27;<span class="number">2019-06-11</span>T16:53:56.<span class="number">737000</span>&#x27;,</span><br><span class="line">              &#x27;userId&#x27;: None,</span><br><span class="line">              &#x27;using&#x27;: False,</span><br><span class="line">              &#x27;usingBeganAt&#x27;: &#x27;<span class="number">2019-06-11</span>T16:53:32.<span class="number">250000</span>&#x27;,</span><br><span class="line">              &#x27;usingDuration&#x27;: <span class="number">8877.971</span>&#125;],</span><br><span class="line"> &#x27;success&#x27;: True&#125;</span><br></pre></td></tr></table></figure>
<p>几个比较重要的字段说明</p>
<pre><code>* platform目前有两个值android和apple
* present代表设备是否在线
* colding代表设备是否正在清理或者自检中, 此时是不能占用设备的
* using代表设备是否有人正在使用
* userId代表使用者的ID，这里的ID其实就是Email
* properties代表设备的一些状态信息，基本都是静态信息
</code></pre>
<h2 id="获取单个设备信息"><a href="#获取单个设备信息" class="headerlink" title="获取单个设备信息"></a>获取单个设备信息</h2><p>如果我们想查看单个设备的信息，可以封装如下方法来查看。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_iOS_device_by_udid</span>(<span class="params">self, udid</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    获取单个设备信息</span></span><br><span class="line"><span class="string">    :param udid:str 设备的 udid 字段</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    left_url = <span class="string">&quot;/&quot;</span>.join([USER_DEVICES_URL, udid])</span><br><span class="line">    url = urljoin(self.atx_url, left_url)</span><br><span class="line">    info = self._get_response(url=url)</span><br><span class="line">    <span class="comment"># pprint(info)</span></span><br><span class="line">    <span class="keyword">return</span> info</span><br></pre></td></tr></table></figure>
<p>调用方法如下：</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ATX_URL</span> =&#x27;http://<span class="number">172</span>.<span class="number">28</span>.xx.xx:<span class="number">4000</span>&#x27;</span><br><span class="line"><span class="attribute">Token</span>=&#x27;xxxxxxx&#x27;</span><br><span class="line"><span class="attribute">udid</span>=&#x27;<span class="number">2</span>cced<span class="number">5</span>ac<span class="number">6</span>ad<span class="number">06</span>c<span class="number">35</span>e<span class="number">067460</span>dad<span class="number">5</span>ff<span class="number">417</span>f<span class="number">264</span>b<span class="number">8</span>ae&#x27;  #iphone<span class="number">7</span></span><br><span class="line"> </span><br><span class="line"><span class="attribute">atx</span>=AtxiOS(ATX_URL,Token)</span><br><span class="line"><span class="attribute">device_info</span>=atx.get_iOS_device_by_udid(udid) #获取单个设备信息</span><br><span class="line"><span class="attribute">pprint</span>(device_info)</span><br></pre></td></tr></table></figure>
<p>返回内容如下：</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#x27;device&#x27;: &#123;&#x27;colding&#x27;: False,</span><br><span class="line">            &#x27;createdAt&#x27;: &#x27;<span class="number">2019-05-30</span>T21:39:47.<span class="number">708000</span>&#x27;,</span><br><span class="line">            &#x27;idleTimeout&#x27;: <span class="number">600</span>,</span><br><span class="line">            &#x27;lastActivatedAt&#x27;: &#x27;<span class="number">2019-06-11</span>T16:53:32.<span class="number">250000</span>&#x27;,</span><br><span class="line">            &#x27;owner&#x27;: &#x27;&#x27;,</span><br><span class="line">            &#x27;platform&#x27;: &#x27;apple&#x27;,</span><br><span class="line">            &#x27;properties&#x27;: &#123;&#x27;brand&#x27;: &#x27;Apple&#x27;,</span><br><span class="line">                           &#x27;ip&#x27;: &#x27;172.28.213.231&#x27;,</span><br><span class="line">                           &#x27;name&#x27;: &#x27;iPhone 7&#x27;,</span><br><span class="line">                           &#x27;product&#x27;: &#x27;iPhone 7&#x27;,</span><br><span class="line">                           &#x27;propertyId&#x27;: &#x27;<span class="number">1908090112</span>&#x27;,</span><br><span class="line">                           &#x27;sdkVersion&#x27;: &#x27;12.2&#x27;,</span><br><span class="line">                           &#x27;version&#x27;: &#x27;12.1.4&#x27;&#125;,</span><br><span class="line">            &#x27;source&#x27;: &#123;&#x27;id&#x27;: &#x27;<span class="number">0681</span>c592-8bf4-11e9-afd1-<span class="number">0242</span>ac<span class="number">120002</span>&#x27;,</span><br><span class="line">                       &#x27;name&#x27;: &#x27;pyclient&#x27;,</span><br><span class="line">                       &#x27;owner&#x27;: &#x27;nobody@nobody.io&#x27;,</span><br><span class="line">                       &#x27;priority&#x27;: <span class="number">2</span>,</span><br><span class="line">                       &#x27;secret&#x27;: &#x27;&#x27;,</span><br><span class="line">                       &#x27;url&#x27;: &#x27;http://172.28.xx.xx:<span class="number">3600</span>&#x27;,</span><br><span class="line">                       &#x27;wdaUrl&#x27;: &#x27;http://172.28.xx.xx:<span class="number">2002</span>3&#x27;&#125;,</span><br><span class="line">            &#x27;sources&#x27;: &#123;&#x27;<span class="number">0681</span>c592-8bf4-11e9-afd1-<span class="number">0242</span>ac<span class="number">120002</span>&#x27;: &#123;&#x27;id&#x27;: &#x27;<span class="number">0681</span>c592-8bf4-11e9-afd1-<span class="number">0242</span>ac<span class="number">120002</span>&#x27;,</span><br><span class="line">                                                                 &#x27;name&#x27;: &#x27;pyclient&#x27;,</span><br><span class="line">                                                                 &#x27;owner&#x27;: &#x27;nobody@nobody.io&#x27;,</span><br><span class="line">                                                                 &#x27;priority&#x27;: <span class="number">2</span>,</span><br><span class="line">                                                                 &#x27;secret&#x27;: &#x27;&#x27;,</span><br><span class="line">                                                                 &#x27;url&#x27;: &#x27;http://172.28.xx.xx:<span class="number">3600</span>&#x27;,</span><br><span class="line">                                                                 &#x27;wdaUrl&#x27;: &#x27;http://172.28.xx.xx:<span class="number">2002</span>3&#x27;&#125;&#125;,</span><br><span class="line">            &#x27;udid&#x27;: &#x27;2cced5ac6ad06c35e<span class="number">067460</span>dad5ff417f264b8ae&#x27;,</span><br><span class="line">            &#x27;updatedAt&#x27;: &#x27;<span class="number">2019-06-11</span>T16:53:56.<span class="number">737000</span>&#x27;,</span><br><span class="line">            &#x27;userId&#x27;: None,</span><br><span class="line">            &#x27;using&#x27;: False,</span><br><span class="line">            &#x27;usingBeganAt&#x27;: &#x27;<span class="number">2019-06-11</span>T16:53:32.<span class="number">250000</span>&#x27;,</span><br><span class="line">            &#x27;usingDuration&#x27;: <span class="number">8877.971</span>&#125;,</span><br><span class="line"> &#x27;success&#x27;: True&#125;</span><br></pre></td></tr></table></figure>
<h2 id="获取设备远程WDA地址"><a href="#获取设备远程WDA地址" class="headerlink" title="获取设备远程WDA地址"></a>获取设备远程WDA地址</h2><p>每台挂载在ATX2平台的iOS设备都有一个唯一的WDA地址，我们可以根据这个地址来远程调用该设备，一般地址格式为:ATX地址IP+端口号</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_wda_url</span>(<span class="params">self,udid</span>):</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    获取iOS设备远程wda链接</span></span><br><span class="line"><span class="string">    :param udid: 设备udid</span></span><br><span class="line"><span class="string">    :return: </span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    device_info =self.get_iOS_device_by_udid(udid)</span><br><span class="line">    wda_url = device_info[<span class="string">&#x27;device&#x27;</span>][<span class="string">&#x27;source&#x27;</span>][<span class="string">&#x27;wdaUrl&#x27;</span>]</span><br><span class="line">    logging.info(<span class="string">&#x27;wda_url is %s&#x27;</span> %wda_url)</span><br><span class="line">    <span class="keyword">return</span> wda_url</span><br></pre></td></tr></table></figure>
<p>调用方法</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ATX_URL</span> =&#x27;http://<span class="number">172</span>.<span class="number">28</span>.xx.xx:<span class="number">4000</span>&#x27;</span><br><span class="line"><span class="attribute">Token</span>=&#x27;a<span class="number">0344</span>xxxxx<span class="number">45</span>e<span class="number">92</span>a<span class="number">396</span>b<span class="number">0530</span>&#x27;</span><br><span class="line"><span class="attribute">udid</span>=&#x27;<span class="number">2</span>cced<span class="number">5</span>ac<span class="number">6</span>ad<span class="number">06</span>c<span class="number">35</span>e<span class="number">067460</span>dad<span class="number">5</span>ff<span class="number">417</span>f<span class="number">264</span>b<span class="number">8</span>ae&#x27;  #iphone<span class="number">7</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">atx</span>=AtxiOS(ATX_URL,Token)</span><br><span class="line"><span class="attribute">atx</span>.get_wda_url(udid) #获取设备的远程url地址</span><br></pre></td></tr></table></figure>
<p>返回结果</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">http</span>://<span class="number">172</span>.<span class="number">28</span>.xx.xx:<span class="number">200000</span></span><br></pre></td></tr></table></figure>
<p>设备占用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">using_iOS_device</span>(<span class="params">self, udid</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    占用一台设备</span></span><br><span class="line"><span class="string">    :param udid: str 设备的 udid 字段</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    url = urljoin(self.atx_url, USER_DEVICES_URL)</span><br><span class="line">    data = &#123;<span class="string">&quot;udid&quot;</span>: udid&#125;</span><br><span class="line">    headers = self.headers</span><br><span class="line">    headers[<span class="string">&quot;Content-Type&quot;</span>] = <span class="string">&quot;application/json&quot;</span></span><br><span class="line">    info = self._get_response(url, <span class="string">&quot;POST&quot;</span>, headers, json.dumps(data))</span><br><span class="line">    logging.info(info)</span><br></pre></td></tr></table></figure>
<p>调用方法</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ATX_URL</span> =&#x27;http://<span class="number">172</span>.<span class="number">28</span>.xx.xx:<span class="number">4000</span>&#x27;</span><br><span class="line"><span class="attribute">Token</span>=&#x27;a<span class="number">0344</span>xxxxx<span class="number">45</span>e<span class="number">92</span>a<span class="number">396</span>b<span class="number">0530</span>&#x27;</span><br><span class="line"><span class="attribute">udid</span>=&#x27;<span class="number">2</span>cced<span class="number">5</span>ac<span class="number">6</span>ad<span class="number">06</span>c<span class="number">35</span>e<span class="number">067460</span>dad<span class="number">5</span>ff<span class="number">417</span>f<span class="number">264</span>b<span class="number">8</span>ae&#x27;  #iphone<span class="number">7</span></span><br><span class="line"> </span><br><span class="line"><span class="attribute">atx</span>=AtxiOS(ATX_URL,Token)</span><br><span class="line"><span class="attribute">atx</span>.using_iOS_device(udid) #占用设备</span><br></pre></td></tr></table></figure>
<p>调用方法之后会有三种情况，设备占用成功或失败，返回内容如下：</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;description&#x27;</span>: <span class="string">&#x27;Device successfully added&#x27;</span>, <span class="string">&#x27;success&#x27;</span>: <span class="literal">True</span>&#125; <span class="meta">#设备占用成功</span></span><br><span class="line">&#123;<span class="string">&#x27;description&#x27;</span>: <span class="string">&#x27;Device add failed: device busy&#x27;</span>, <span class="string">&#x27;success&#x27;</span>: <span class="literal">False</span>&#125; <span class="meta">#设备被其他人占用</span></span><br><span class="line">&#123;<span class="string">&#x27;success&#x27;</span>: <span class="literal">False</span>, <span class="string">&#x27;description&#x27;</span>: <span class="string">&#x27;Device add failed: device not exist&#x27;</span>&#125; <span class="meta">#udid值错误</span></span><br></pre></td></tr></table></figure>

<h2 id="设备释放"><a href="#设备释放" class="headerlink" title="设备释放"></a>设备释放</h2><p>使用完设备之后我们需要释放设备，定义方法如下:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">release_iOS_device</span>(<span class="params">self, udid</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    释放iOS设备</span></span><br><span class="line"><span class="string">    :param udid:str 设备的 udid 字段</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    left_url = <span class="string">&quot;/&quot;</span>.join([USER_DEVICES_URL, udid])</span><br><span class="line">    url = urljoin(self.atx_url, left_url)</span><br><span class="line">    info = self._get_response(url, <span class="string">&quot;DELETE&quot;</span>)</span><br><span class="line">    logging.info(info)</span><br></pre></td></tr></table></figure>
<p>调用方法如下：</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ATX_URL</span> =&#x27;http://<span class="number">172</span>.<span class="number">28</span>.xx.xx:<span class="number">4000</span>&#x27;</span><br><span class="line"><span class="attribute">Token</span>=&#x27;a<span class="number">0344</span>xxxxx<span class="number">45</span>e<span class="number">92</span>a<span class="number">396</span>b<span class="number">0530</span>&#x27;</span><br><span class="line"><span class="attribute">udid</span>=&#x27;<span class="number">2</span>cced<span class="number">5</span>ac<span class="number">6</span>ad<span class="number">06</span>c<span class="number">35</span>e<span class="number">067460</span>dad<span class="number">5</span>ff<span class="number">417</span>f<span class="number">264</span>b<span class="number">8</span>ae&#x27;  #iphone<span class="number">7</span></span><br><span class="line"> </span><br><span class="line"><span class="attribute">atx</span>=AtxiOS(ATX_URL,Token)</span><br><span class="line"><span class="attribute">atx</span>.release_iOS_device(udid) #释放设备</span><br></pre></td></tr></table></figure>
<p>设备释放成功时返回内容如下：</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="symbol">&#x27;success</span>&#x27;: <span class="literal">True</span>, <span class="symbol">&#x27;description</span>&#x27;: <span class="symbol">&#x27;Device</span> successfully released&#x27;&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：释放接口可以释放非当前账户占用的设备，释放时一定要确认udid是否为自己占用的设备，避免影响他人正常使用！</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://vic.kim/2019/08/22/iOS%E7%9C%9F%E6%9C%BA%E5%AE%89%E8%A3%85WebDriverAgent/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/smile.jpg">
      <meta itemprop="name" content="Vic">
      <meta itemprop="description" content="人生苦短，我学Python">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Vicの博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/08/22/iOS%E7%9C%9F%E6%9C%BA%E5%AE%89%E8%A3%85WebDriverAgent/" class="post-title-link" itemprop="url">iOS真机安装WebDriverAgent</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2019-08-22 17:07:46 / 修改时间：17:18:04" itemprop="dateCreated datePublished" datetime="2019-08-22T17:07:46+08:00">2019-08-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/App%E8%87%AA%E5%8A%A8%E5%8C%96/" itemprop="url" rel="index"><span itemprop="name">App自动化</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="iOS-真机安装-WebDriverAgent"><a href="#iOS-真机安装-WebDriverAgent" class="headerlink" title="iOS 真机安装 WebDriverAgent"></a>iOS 真机安装 WebDriverAgent</h1><p>本文根据 <a target="_blank" rel="noopener" href="https://testerhome.com/topics/7220">ATX 文档 - iOS 真机如何安装 WebDriverAgent</a> 进行实践<br>参考资料<br><a target="_blank" rel="noopener" href="https://github.com/openatx/facebook-wda">https://github.com/openatx/facebook-wda</a><br><a target="_blank" rel="noopener" href="https://github.com/NetEaseGame/ATX">https://github.com/NetEaseGame/ATX</a><br><a target="_blank" rel="noopener" href="https://github.com/facebook/WebDriverAgent">https://github.com/facebook/WebDriverAgent</a><br><a target="_blank" rel="noopener" href="https://github.com/appium/WebDriverAgent">https://github.com/appium/WebDriverAgent</a></p>
<h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><p>注意：尽量升级Xcode到最新版本，iphone版本大于9.3</p>
<ul>
<li>Xcode版本：10.2.1</li>
<li>iPhone版本：12.2</li>
<li>OS版本：10.14.4</li>
</ul>
<h1 id="实践开始"><a href="#实践开始" class="headerlink" title="实践开始"></a>实践开始</h1><ul>
<li><p>新建一个目录，从 git 下载 WDA 项目代码到本地<br>  <code>git clone https://github.com/facebook/WebDriverAgent</code></p>
</li>
<li><p>运行初始化脚本</p>
  <figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#进入代码目录</span></span><br><span class="line">cd xx<span class="regexp">/xx/</span>WebDriverAgent-master</span><br><span class="line"><span class="comment">#执行初始化脚本</span></span><br><span class="line">.<span class="regexp">/Scripts/</span>bootstrap.sh</span><br></pre></td></tr></table></figure></li>
<li><p>注<br>  根据报错通过 brew 安装以下依赖</p>
<ol>
<li>carthage依赖：<code>brew install carthage</code></li>
<li>npm：<code>brew install npm</code></li>
</ol>
</li>
</ul>
<h1 id="证书设置"><a href="#证书设置" class="headerlink" title="证书设置"></a>证书设置</h1><ol>
<li><p>进入项目路径，双击打开WebDriverAgent.xcodeproj，打开xcode后按照下方数字序号依次点击，勾选第5项目，弹框内点击Enable Automatic。<br><img src="/2019/08/22/iOS%E7%9C%9F%E6%9C%BA%E5%AE%89%E8%A3%85WebDriverAgent/15571122331434.jpg"></p>
</li>
<li><p>Team 栏添加帐户（个人账号和开发者账号兼可）选中<br><img src="/2019/08/22/iOS%E7%9C%9F%E6%9C%BA%E5%AE%89%E8%A3%85WebDriverAgent/15571124398069.jpg" alt="-w1059"></p>
</li>
</ol>
<ol start="3">
<li><p>接着在TARGETS里面选中WebDriverAgentRunner，用同样的方法设置好证书<br><img src="/2019/08/22/iOS%E7%9C%9F%E6%9C%BA%E5%AE%89%E8%A3%85WebDriverAgent/15570487234316.jpg" alt="-w1139"></p>
</li>
<li><p>个人免费版的证书，还需要修改下WebDriverAgent的BundleID，随便加后缀，不要跟别人重复就好<br><img src="/2019/08/22/iOS%E7%9C%9F%E6%9C%BA%E5%AE%89%E8%A3%85WebDriverAgent/15571126202793.jpg"></p>
</li>
</ol>
<h1 id="运行和测试"><a href="#运行和测试" class="headerlink" title="运行和测试"></a>运行和测试</h1><p><img src="/2019/08/22/iOS%E7%9C%9F%E6%9C%BA%E5%AE%89%E8%A3%85WebDriverAgent/15570489183241.jpg" alt="-w784"></p>
<ul>
<li><p>点击方框选项，分别选择WebDriverAgentRunner和目标设备</p>
</li>
<li><p>运行 Product -&gt; Test<br>一切正常的话，手机上会出现一个无图标的WebDriverAgent应用，启动之后，马上又返回到桌面。</p>
</li>
<li><p>个人免费证书第一次运行需要信任证书<br>日志信息如下：</p>
<blockquote>
<p>Verify the Developer App certificate for your account is trusted on your device. Open Settings on Vic小叶子 and navigate to General -&gt; Device Management, then select your Developer App certificate to trust it.</p>
</blockquote>
</li>
</ul>
<p>原因：开发者人员程序未受信任<br>解决：进入手机设置-&gt; 通用-&gt; 描述文件与设备管理-&gt; 点击开发者应用，信任一下就好了。</p>
<p>此时控制台界面可以看到设备的IP。如果看不到的话，使用这种方法打开<br><img src="/2019/08/22/iOS%E7%9C%9F%E6%9C%BA%E5%AE%89%E8%A3%85WebDriverAgent/15570491084022.jpg" alt="-w607"><br><img src="/2019/08/22/iOS%E7%9C%9F%E6%9C%BA%E5%AE%89%E8%A3%85WebDriverAgent/15570491892095.jpg" alt="-w1248"></p>
<ul>
<li><p>通过上面给出的IP和端口，加上/status合成一个url地址。例如<a target="_blank" rel="noopener" href="http://10.0.0.1:8100/status">http://10.0.0.1:8100/status</a>，然后浏览器打开。如果出现一串JSON输出，说明WDA安装成功了。</p>
<p>  实际情况，我到这一步访问这个地址无响应：<br>  原因：部分国行的iphone机器通过IP和端口还不能访问<br>  解决：需要将手机的端口转发到Mac上（端口转发见下文）</p>
</li>
</ul>
<h1 id="端口转发"><a href="#端口转发" class="headerlink" title="端口转发"></a>端口转发</h1><p>有些国产的iPhone机器通过手机的IP和端口还不能访问，此时需要将手机的端口转发到Mac上。</p>
<ul>
<li>安装libimobiledevice</li>
</ul>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">brew </span>update</span><br><span class="line"><span class="keyword">brew </span>uninstall --ignore-dependencies libimobiledevice</span><br><span class="line"><span class="keyword">brew </span>uninstall --ignore-dependencies usbmuxd</span><br><span class="line"><span class="keyword">brew </span><span class="keyword">install </span>--HEAD usbmuxd</span><br><span class="line"><span class="keyword">brew </span>unlink usbmuxd</span><br><span class="line"><span class="keyword">brew </span>link usbmuxd</span><br><span class="line"><span class="keyword">brew </span><span class="keyword">install </span>--HEAD libimobiledevice</span><br></pre></td></tr></table></figure>
<ul>
<li><p>转发端口<br><code>iproxy 8100 8100 UDID</code><br>使用iproxy –help 可以查到更具体的用法。</p>
</li>
<li><p>查询UDID<br>instruments -s</p>
</li>
</ul>
<p>这时通过访问<code>http://localhost:8100/status</code>，如果出现一串JSON输出，说明WDA安装成功了。</p>
<h1 id="inspector"><a href="#inspector" class="headerlink" title="inspector"></a>inspector</h1><p>是用来查看UI的图层，方便编写测试脚本<br>inspector的地址是:<code>http://localhost:8100/inspector</code><br><img src="/2019/08/22/iOS%E7%9C%9F%E6%9C%BA%E5%AE%89%E8%A3%85WebDriverAgent/15571131403218.jpg" alt="-w1673"></p>
<h1 id="使用终端替代Xcode"><a href="#使用终端替代Xcode" class="headerlink" title="使用终端替代Xcode"></a>使用终端替代Xcode</h1><p>通常来说为了持续集成，能够全部自动化比较好一些<br>启动 WebDriverAgent，官方提供了四种方式：</p>
<ol>
<li>Xcode</li>
<li>xcodebuild</li>
<li>Using fbsimctl from FBSimulatorControl framework</li>
<li>Using FBSimulatorControl framework directly</li>
</ol>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解锁keychain，以便可以正常的签名应用，</span></span><br><span class="line"><span class="attribute">PASSWORD</span>=<span class="string">&quot;replace-with-your-password&quot;</span></span><br><span class="line">security unlock-keychain -p <span class="variable">$PASSWORD</span> ~/Library/Keychains/login.keychain</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取设备的UDID</span></span><br><span class="line"><span class="attribute">UDID</span>=$(idevice_id -l | head -n1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行测试</span></span><br><span class="line">xcodebuild -project WebDriverAgent.xcodeproj -scheme WebDriverAgentRunner -destination <span class="string">&quot;id=<span class="variable">$UDID</span>&quot;</span> test</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://vic.kim/2019/08/21/Docker%E5%AE%89%E8%A3%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/smile.jpg">
      <meta itemprop="name" content="Vic">
      <meta itemprop="description" content="人生苦短，我学Python">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Vicの博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/08/21/Docker%E5%AE%89%E8%A3%85/" class="post-title-link" itemprop="url">Docker安装</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-08-21 20:10:20" itemprop="dateCreated datePublished" datetime="2019-08-21T20:10:20+08:00">2019-08-21</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://vic.kim/2019/08/21/atxserver2%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0%E6%90%AD%E5%BB%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/smile.jpg">
      <meta itemprop="name" content="Vic">
      <meta itemprop="description" content="人生苦短，我学Python">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Vicの博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/08/21/atxserver2%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0%E6%90%AD%E5%BB%BA/" class="post-title-link" itemprop="url">atxserver2设备管理平台搭建</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-08-21 19:54:24" itemprop="dateCreated datePublished" datetime="2019-08-21T19:54:24+08:00">2019-08-21</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2019-10-24 15:55:00" itemprop="dateModified" datetime="2019-10-24T15:55:00+08:00">2019-10-24</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/App%E8%87%AA%E5%8A%A8%E5%8C%96/" itemprop="url" rel="index"><span itemprop="name">App自动化</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[TOC]</p>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>前面分享了STF Andriod设备远程管理平台的搭建和使用，但是STF不支持iOS设备连接，虽然现在社区有了STF集成iOS设备的开源方案，但是经过实践不太稳定，后面再Testerhome社区发现了一个新的框架ATX2同时支持Android和iOS设备远程管理，经过实践设备连接非常稳定，所以这里分享下这个平台的搭建和使用</p>
<h1 id="ATX2简介"><a href="#ATX2简介" class="headerlink" title="ATX2简介"></a>ATX2简介</h1><p>ATX2是一款可以远程控制Android和iOS设备的设备管理平台。该平台使用的技术栈为:Python3+NodeJS+RethinkDB 项目目前已经开源，作者是阿里的一位大牛:<a target="_blank" rel="noopener" href="https://github.com/codeskyblue">codeskyblue</a></p>
<ul>
<li>项目:Github地址:<a target="_blank" rel="noopener" href="https://github.com/openatx/atxserver2">https://github.com/openatx/atxserver2</a></li>
<li>平台框架图如下所示：<br><img src="/2019/08/21/atxserver2%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0%E6%90%AD%E5%BB%BA/atx-frame.png" alt="框架图"></li>
</ul>
<h1 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h1><p>系统环境:Mac Os 10.14.6(因为要使用iOS设备连接WDA，所以需要Mac Os环境)</p>
<p>python3安装</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">brew </span><span class="keyword">install </span>python3</span><br></pre></td></tr></table></figure>
<p>rethinkdb安装</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">brew </span><span class="keyword">install </span> rethinkdb</span><br></pre></td></tr></table></figure>

<h1 id="服务部署"><a href="#服务部署" class="headerlink" title="服务部署"></a>服务部署</h1><p>启动ATX2服务有2种方式：</p>
<ul>
<li>Docker部署</li>
<li>源码部署</li>
</ul>
<h2 id="Docker部署"><a href="#Docker部署" class="headerlink" title="Docker部署"></a>Docker部署</h2><ul>
<li>使用Docker部署需要安装Docker，具体安装步骤见:Docker安装</li>
<li>代码Clone到本地</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/openatx/</span>atxserver2</span><br></pre></td></tr></table></figure>
<ul>
<li>打开命令终端，切换到代码目录，执行一条命令即可</li>
</ul>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker-compose up</span></span><br></pre></td></tr></table></figure>

<h2 id="源码部署"><a href="#源码部署" class="headerlink" title="源码部署"></a>源码部署</h2><p>先准备好一个rethinkdb服务器，并启动</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rethinkdb</span></span><br></pre></td></tr></table></figure>
<p>代码clone到本地</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">clone</span> <span class="title">git</span>@github.com:openatx/atxserver2.git</span><br></pre></td></tr></table></figure>
<p>打开命令终端，切换到代码目录，然后执行命令下面的命令安装依赖</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 <span class="keyword">install</span> -r requirements.txt</span><br></pre></td></tr></table></figure>
<p>启动服务，命令如下</p>
<figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#默认方式启动，使用默认的登录方式，默认端口</span></span><br><span class="line"><span class="string">python3</span> <span class="string">main</span>.<span class="string">py</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定认证方式</span></span><br><span class="line"><span class="string">python3</span> <span class="string">main</span>.<span class="string">py</span> <span class="built_in">--auth</span> <span class="string">simple</span>  <span class="comment">#默认是一个非常simple的认证，输入邮箱就可以</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置监听端口</span></span><br><span class="line"><span class="string">python3</span> <span class="string">main</span>.<span class="string">py</span> <span class="built_in">--port</span> <span class="string">4000</span> <span class="comment"># 默认监听4000端口</span></span><br></pre></td></tr></table></figure>

<h2 id="打开页面"><a href="#打开页面" class="headerlink" title="打开页面"></a>打开页面</h2><p>启动之后，浏览器打开<a href="http://localhost(本机ip也可以):4000，登录之后就可以顺利的看到设备列表页了,由于还没有接入设备所以设备列表为空。">http://localhost(本机ip也可以):4000，登录之后就可以顺利的看到设备列表页了,由于还没有接入设备所以设备列表为空。</a><br><img src="/2019/08/21/atxserver2%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0%E6%90%AD%E5%BB%BA/atx_index.png" alt="框架图"></p>
<h1 id="Android设备接入atxserver2-android-provider"><a href="#Android设备接入atxserver2-android-provider" class="headerlink" title="Android设备接入atxserver2-android-provider"></a>Android设备接入<a target="_blank" rel="noopener" href="https://github.com/openatx/atxserver2-android-provider">atxserver2-android-provider</a></h1><p>依赖 Python3.6+, NodeJS 8, Git-LFS<br>NodeJS版本太高了也不行，一定要NodeJS 8，推荐使用nvm管理node版本</p>
<h2 id="Install-git-lfs"><a href="#Install-git-lfs" class="headerlink" title="Install git-lfs"></a>Install git-lfs</h2><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">brew </span><span class="keyword">install </span>git-lfs</span><br></pre></td></tr></table></figure>


<h2 id="Clone代码到本地，切换到代码目录"><a href="#Clone代码到本地，切换到代码目录" class="headerlink" title="Clone代码到本地，切换到代码目录"></a>Clone代码到本地，切换到代码目录</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/openatx/</span>atxserver2-android-provider</span><br><span class="line">cd atxserver2-android-provider</span><br><span class="line">git lfs install</span><br><span class="line">git lfs pull</span><br></pre></td></tr></table></figure>

<h2 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span></span><br><span class="line">pip <span class="keyword">install</span> -r requirements.txt</span><br></pre></td></tr></table></figure>

<h2 id="启动，需要指定atxserver2的地址-假设地址为-http-localhost-4000"><a href="#启动，需要指定atxserver2的地址-假设地址为-http-localhost-4000" class="headerlink" title="启动，需要指定atxserver2的地址, 假设地址为 http://localhost:4000"></a>启动，需要指定atxserver2的地址, 假设地址为 <a target="_blank" rel="noopener" href="http://localhost:4000/">http://localhost:4000</a></h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">python3</span> main.<span class="keyword">py</span> --server localhos<span class="variable">t:4000</span></span><br></pre></td></tr></table></figure>
<p>Provider可以通过adb track-devices自动发现已经接入的设备，当手机接入到电脑上时，会自动给手机安装minicap, minitouch, atx-agent, app-uiautomator-[test].apk, whatsinput-apk</p>
<p>接入的设备需要配置好开发者选项, 不同设备的设置方案放到了该项目的Issue中, tag: device-settings 如果没有该机型，可以自助添加</p>
<h1 id="iOS设备接入atxserver2-ios-provider"><a href="#iOS设备接入atxserver2-ios-provider" class="headerlink" title="iOS设备接入atxserver2-ios-provider"></a>iOS设备接入<a target="_blank" rel="noopener" href="https://github.com/openatx/atxserver2-ios-provider">atxserver2-ios-provider</a></h1><p>依赖 Python3.6+, NodeJS 8, WebDriverAgent(appium)</p>
<h2 id="安装libimobiledevice工具包"><a href="#安装libimobiledevice工具包" class="headerlink" title="安装libimobiledevice工具包"></a>安装libimobiledevice工具包</h2><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">brew </span>uninstall --ignore-dependencies libimobiledevice</span><br><span class="line"><span class="keyword">brew </span>uninstall --ignore-dependencies usbmuxd</span><br><span class="line"></span><br><span class="line"><span class="keyword">brew </span><span class="keyword">install </span>--HEAD usbmuxd</span><br><span class="line"><span class="keyword">brew </span>unlink usbmuxd</span><br><span class="line"><span class="keyword">brew </span>link usbmuxd</span><br><span class="line"></span><br><span class="line"><span class="keyword">brew </span><span class="keyword">install </span>--HEAD libimobiledevice</span><br><span class="line"><span class="keyword">brew </span><span class="keyword">install </span>ideviceinstaller</span><br><span class="line"><span class="keyword">brew </span>link --overwrite ideviceinstaller</span><br></pre></td></tr></table></figure>

<h2 id="安装atxserver2-ios-provider"><a href="#安装atxserver2-ios-provider" class="headerlink" title="安装atxserver2-ios-provider,"></a>安装atxserver2-ios-provider,</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/openatx/</span>atxserver2-ios-provider --recursive</span><br><span class="line">cd atxserver2-ios-provider</span><br><span class="line">pip3 install -r requirements.txt</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>


<h2 id="初始化其中的ATX-WebDriverAgent"><a href="#初始化其中的ATX-WebDriverAgent" class="headerlink" title="初始化其中的ATX-WebDriverAgent"></a>初始化其中的ATX-WebDriverAgent</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/appium/</span>WebDriverAgent</span><br><span class="line">cd ATX-WebDriverAgent</span><br><span class="line">brew install carthage</span><br><span class="line">.<span class="regexp">/Scripts/</span>bootstrap.sh</span><br></pre></td></tr></table></figure>
<p>后找台手机接到苹果电脑上。 按照这个文档<a target="_blank" rel="noopener" href="https://testerhome.com/topics/7220">https://testerhome.com/topics/7220</a> 对WebDriverAgent项目进行下设置</p>
<h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">python3</span> main.<span class="keyword">py</span></span><br></pre></td></tr></table></figure>
<p>连接成功后，如下图所示可以看到连接的iOS设备，点击立即使用即可远程控制。<br><img src="/2019/08/21/atxserver2%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0%E6%90%AD%E5%BB%BA/atx2_iOS_action.gif" alt="示例图"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://vic.kim/2019/08/21/CocoaPods%E5%AE%89%E8%A3%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/smile.jpg">
      <meta itemprop="name" content="Vic">
      <meta itemprop="description" content="人生苦短，我学Python">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Vicの博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/08/21/CocoaPods%E5%AE%89%E8%A3%85/" class="post-title-link" itemprop="url">CocoaPods安装</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2019-08-21 19:26:52 / 修改时间：19:58:05" itemprop="dateCreated datePublished" datetime="2019-08-21T19:26:52+08:00">2019-08-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%B5%84%E6%96%99/" itemprop="url" rel="index"><span itemprop="name">资料</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Ruby环境搭建"><a href="#Ruby环境搭建" class="headerlink" title="Ruby环境搭建"></a>Ruby环境搭建</h1><h2 id="查看当前Ruby版本"><a href="#查看当前Ruby版本" class="headerlink" title="查看当前Ruby版本"></a>查看当前Ruby版本</h2><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ruby -v</span></span><br></pre></td></tr></table></figure>
<h2 id="查看rvm版本"><a href="#查看rvm版本" class="headerlink" title="查看rvm版本"></a>查看rvm版本</h2><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rvm -v</span> </span><br></pre></td></tr></table></figure>
<p>显示如下(或者是其他版本)</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rvm</span> <span class="number">1</span>.<span class="number">29</span>.<span class="number">3</span> (latest) by Michal Papis, Piotr Kuczynski, Wayne E. Seguin<span class="meta"> [https://rvm.io]</span></span><br></pre></td></tr></table></figure>

<h2 id="列出ruby可安装的版本信息"><a href="#列出ruby可安装的版本信息" class="headerlink" title="列出ruby可安装的版本信息"></a>列出ruby可安装的版本信息</h2><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rvm list known</span></span><br></pre></td></tr></table></figure>
<p>显示如下</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># <span class="selector-tag">MRI</span> <span class="selector-tag">Rubies</span></span><br><span class="line"><span class="selector-attr">[ruby-]</span><span class="selector-tag">1</span><span class="selector-class">.8</span><span class="selector-class">.6</span><span class="selector-attr">[-p420]</span></span><br><span class="line"><span class="selector-attr">[ruby-]</span><span class="selector-tag">1</span><span class="selector-class">.8</span><span class="selector-class">.7</span><span class="selector-attr">[-head]</span> # <span class="selector-tag">security</span> <span class="selector-tag">released</span> <span class="selector-tag">on</span> <span class="selector-tag">head</span></span><br><span class="line"><span class="selector-attr">[ruby-]</span><span class="selector-tag">1</span><span class="selector-class">.9</span><span class="selector-class">.1</span><span class="selector-attr">[-p431]</span></span><br><span class="line"><span class="selector-attr">[ruby-]</span><span class="selector-tag">1</span><span class="selector-class">.9</span><span class="selector-class">.2</span><span class="selector-attr">[-p330]</span></span><br><span class="line"><span class="selector-attr">[ruby-]</span><span class="selector-tag">1</span><span class="selector-class">.9</span><span class="selector-class">.3</span><span class="selector-attr">[-p551]</span></span><br><span class="line"><span class="selector-attr">[ruby-]</span><span class="selector-tag">2</span><span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-attr">[-p648]</span></span><br><span class="line"><span class="selector-attr">[ruby-]</span><span class="selector-tag">2</span><span class="selector-class">.1</span><span class="selector-attr">[.10]</span></span><br><span class="line"><span class="selector-attr">[ruby-]</span><span class="selector-tag">2</span><span class="selector-class">.2</span><span class="selector-attr">[.10]</span></span><br><span class="line"><span class="selector-attr">[ruby-]</span><span class="selector-tag">2</span><span class="selector-class">.3</span><span class="selector-attr">[.7]</span></span><br><span class="line"><span class="selector-attr">[ruby-]</span><span class="selector-tag">2</span><span class="selector-class">.4</span><span class="selector-attr">[.4]</span></span><br><span class="line"><span class="selector-attr">[ruby-]</span><span class="selector-tag">2</span><span class="selector-class">.5</span><span class="selector-attr">[.1]</span>  <span class="comment">// 重点在这里 重点在这里 重点在这里</span></span><br><span class="line"><span class="selector-attr">[ruby-]</span><span class="selector-tag">2</span><span class="selector-class">.6</span><span class="selector-attr">[.0-preview2]</span>   <span class="comment">// 测试版</span></span><br><span class="line"><span class="selector-tag">ruby-head</span></span><br><span class="line">.....</span><br></pre></td></tr></table></figure>

<h2 id="安装一个ruby版本（这里我选择的是2-5-1版本，当然你也可以选择其他的）"><a href="#安装一个ruby版本（这里我选择的是2-5-1版本，当然你也可以选择其他的）" class="headerlink" title="安装一个ruby版本（这里我选择的是2.5.1版本，当然你也可以选择其他的）"></a>安装一个ruby版本（这里我选择的是2.5.1版本，当然你也可以选择其他的）</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rvm install <span class="number">2.5</span>.<span class="number">1</span></span><br><span class="line"><span class="regexp">//</span> 注意:安装过程中需要两次按下 Enter 键, 第二次按下后需要输入电脑访问密码(不可见,只管输入就行);</span><br><span class="line"><span class="regexp">//</span> 如果你电脑没有安装Xcode和Command Line Tools <span class="keyword">for</span> Xcode以及Homebrew 会自动下载安装,建议提前安装这三者.</span><br></pre></td></tr></table></figure>

<p>这里很多小伙伴会遇到错误，大部分是因为没有安装Homebrew造成，所以所以所以要提前安装比较好</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/usr/</span>bin<span class="regexp">/ruby -e &quot;$(curl -fsSL https:/</span><span class="regexp">/raw.githubusercontent.com/</span>Homebrew<span class="regexp">/install/m</span>aster/install)<span class="string">&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="设置为默认版本"><a href="#设置为默认版本" class="headerlink" title="设置为默认版本"></a>设置为默认版本</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rvm</span> use <span class="number">2</span>.<span class="number">5</span>.<span class="number">1</span> --default</span><br></pre></td></tr></table></figure>

<h2 id="更换源"><a href="#更换源" class="headerlink" title="更换源"></a>更换源</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo gem <span class="keyword">update</span> --<span class="built_in">system</span></span><br><span class="line">gem sources --<span class="built_in">remove</span> http<span class="variable">s:</span>//rubygems.org/</span><br><span class="line">gem sources --<span class="built_in">add</span> http<span class="variable">s:</span>//gems.<span class="keyword">ruby</span>-china.<span class="keyword">com</span>/</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="为了验证你的Ruby镜像是并且仅是ruby-china，执行以下命令查看"><a href="#为了验证你的Ruby镜像是并且仅是ruby-china，执行以下命令查看" class="headerlink" title="为了验证你的Ruby镜像是并且仅是ruby-china，执行以下命令查看"></a>为了验证你的Ruby镜像是并且仅是ruby-china，执行以下命令查看</h2><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">gem sources -l</span></span><br></pre></td></tr></table></figure>
<p>如果是以下结果说明正确，如果有其他的请自行百度解决</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">*** CURRENT SOURCES ***</span><br><span class="line">http<span class="variable">s:</span>//gems.<span class="keyword">ruby</span>-china.<span class="keyword">com</span>/</span><br></pre></td></tr></table></figure>
<h1 id="开始安装CocoaPods"><a href="#开始安装CocoaPods" class="headerlink" title="开始安装CocoaPods"></a>开始安装CocoaPods</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gem install -n <span class="regexp">/usr/</span>local/bin cocoapods</span><br></pre></td></tr></table></figure>
<p>如果安装了多个Xcode使用下面的命令选择（一般需要选择最近的Xcode版本）</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo xcode-select -<span class="keyword">switch</span> <span class="regexp">/Applications/</span>Xcode.app<span class="regexp">/Contents/</span>Developer</span><br></pre></td></tr></table></figure>

<h2 id="安装本地库"><a href="#安装本地库" class="headerlink" title="安装本地库"></a>安装本地库</h2><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod <span class="built_in">setup</span></span><br></pre></td></tr></table></figure>
<p>执行以上命令后</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Setting up CocoaPods <span class="keyword">master</span> <span class="title">repo</span></span><br><span class="line">  $ /usr/bin/git <span class="keyword">clone</span> <span class="title">https</span>://github.com/CocoaPods/Specs.git <span class="keyword">master</span> <span class="title">--progress</span></span><br><span class="line">  Cloning into &#x27;<span class="literal">master</span>&#x27;...</span><br><span class="line">  remote: Counting objects: <span class="number">1879515</span>, done.        </span><br><span class="line">  remote: Compressing objects: <span class="number">100</span>% (<span class="number">321</span>/<span class="number">321</span>), done.        </span><br><span class="line">  Receiving objects:  <span class="number">21</span>% (<span class="number">404525</span>/<span class="number">1879515</span>), <span class="number">73.70</span> MiB | <span class="number">22.00</span> KiB/</span><br></pre></td></tr></table></figure>

<p>然后就是漫长的等待，当然,网络好的情况下会更快</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/d326fc80c719">如果一直安装不成功请参考这里</a></p>
<h2 id="查看你是否安裝成功"><a href="#查看你是否安裝成功" class="headerlink" title="查看你是否安裝成功"></a>查看你是否安裝成功</h2><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">pod</span></span><br></pre></td></tr></table></figure>
<p>显示</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br><span class="line"></span><br><span class="line">    $ pod COMMAND</span><br><span class="line"></span><br><span class="line">      CocoaPods, <span class="keyword">the</span> Cocoa library package manager.</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line"></span><br><span class="line">    + cache         Manipulate <span class="keyword">the</span> CocoaPods cache</span><br><span class="line">    + deintegrate   Deintegrate CocoaPods <span class="built_in">from</span> your project</span><br><span class="line">    + env           Display pod environment</span><br><span class="line">    + init          Generate <span class="keyword">a</span> Podfile <span class="keyword">for</span> <span class="keyword">the</span> current <span class="built_in">directory</span></span><br><span class="line">    + install       Install project dependencies according <span class="built_in">to</span> versions <span class="built_in">from</span> <span class="keyword">a</span></span><br><span class="line">                    Podfile.lock</span><br><span class="line">    + ipc           Inter-<span class="built_in">process</span> communication</span><br><span class="line">    + lib           Develop pods</span><br><span class="line">    + list          List pods</span><br><span class="line">    + outdated      Show outdated project dependencies</span><br><span class="line">    + plugins       Show available CocoaPods plugins</span><br><span class="line">    + repo          Manage spec-repositories</span><br><span class="line">    + search        Search <span class="keyword">for</span> pods</span><br><span class="line">    + setup         Setup <span class="keyword">the</span> CocoaPods environment</span><br><span class="line">    + spec          Manage pod specs</span><br><span class="line">    + trunk         Interact <span class="keyword">with</span> <span class="keyword">the</span> CocoaPods API (e.g. publishing <span class="built_in">new</span> specs)</span><br><span class="line">    + <span class="keyword">try</span>           Try <span class="keyword">a</span> Pod!</span><br><span class="line">    + update        Update outdated project dependencies <span class="keyword">and</span> <span class="built_in">create</span> <span class="built_in">new</span></span><br><span class="line">                    Podfile.lock</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line"></span><br><span class="line">    <span class="comment">--silent        Show nothing</span></span><br><span class="line">    <span class="comment">--version       Show the version of the tool</span></span><br><span class="line">    <span class="comment">--verbose       Show more debugging information</span></span><br><span class="line">    <span class="comment">--no-ansi       Show output without ANSI codes</span></span><br><span class="line">    <span class="comment">--help          Show help banner of specified command</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="CocoaPods版本"><a href="#CocoaPods版本" class="headerlink" title="CocoaPods版本"></a>CocoaPods版本</h2><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod <span class="comment">--version</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://vic.kim/2019/08/21/Mac%E7%BB%88%E7%AB%AF%E5%AE%89%E8%A3%85%E6%8C%87%E5%AE%9A%E7%89%88%E6%9C%ACnode/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/smile.jpg">
      <meta itemprop="name" content="Vic">
      <meta itemprop="description" content="人生苦短，我学Python">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Vicの博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/08/21/Mac%E7%BB%88%E7%AB%AF%E5%AE%89%E8%A3%85%E6%8C%87%E5%AE%9A%E7%89%88%E6%9C%ACnode/" class="post-title-link" itemprop="url">Mac终端安装指定版本node</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2019-08-21 17:29:38 / 修改时间：19:17:04" itemprop="dateCreated datePublished" datetime="2019-08-21T17:29:38+08:00">2019-08-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%B5%84%E6%96%99/" itemprop="url" rel="index"><span itemprop="name">资料</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="安装brew"><a href="#安装brew" class="headerlink" title="安装brew"></a>安装brew</h1><p>终端上运行</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/ruby -e “<span class="constructor">$(<span class="params">curl</span> -<span class="params">fsSL</span> <span class="params">https</span>:<span class="operator">/</span><span class="operator">/</span><span class="params">raw</span>.<span class="params">githubusercontent</span>.<span class="params">com</span><span class="operator">/</span>Homebrew<span class="operator">/</span><span class="params">install</span><span class="operator">/</span><span class="params">master</span><span class="operator">/</span><span class="params">install</span>)</span>”</span><br></pre></td></tr></table></figure>

<h1 id="安装NVM"><a href="#安装NVM" class="headerlink" title="安装NVM"></a>安装NVM</h1><p><code>brew install nvm</code></p>
<p>安装完成之后打开shell的配置文件</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> ~</span><br><span class="line">vim <span class="string">.bash_profile</span></span><br></pre></td></tr></table></figure>

<p>在文件里添加以下命令</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export NVM_DIR=~/.nvm</span><br><span class="line">source <span class="constructor">$(<span class="params">brew</span> --<span class="params">prefix</span> <span class="params">nvm</span>)</span>/nvm.sh</span><br></pre></td></tr></table></figure>

<p>然后重新source</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> .bash_profile</span><br></pre></td></tr></table></figure>

<h1 id="使用nvm安装node"><a href="#使用nvm安装node" class="headerlink" title="使用nvm安装node"></a>使用nvm安装node</h1><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nvm ls-remote 查看 所有的<span class="keyword">node</span><span class="title">可用版本</span></span><br><span class="line"><span class="title">nvm</span> install xxx 下载你想要的版本</span><br><span class="line">nvm use xxx 使用指定版本的<span class="keyword">node</span><span class="title"></span></span><br><span class="line"><span class="title">nvm</span> alias default xxx 每次启动终端都使用该版本的<span class="keyword">node</span><span class="title"></span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://vic.kim/2019/08/21/Mac%20OS%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BASTF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/smile.jpg">
      <meta itemprop="name" content="Vic">
      <meta itemprop="description" content="人生苦短，我学Python">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Vicの博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/08/21/Mac%20OS%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BASTF/" class="post-title-link" itemprop="url">Mac OS环境搭建STF</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2019-08-21 16:59:44 / 修改时间：19:56:21" itemprop="dateCreated datePublished" datetime="2019-08-21T16:59:44+08:00">2019-08-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/App%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">App自动化测试</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>STF（Smartphone Test Farm）是一个Web应用程序，用于从浏览器中远程调试智能手机，智能手表和其他小工具。<br><a target="_blank" rel="noopener" href="https://github.com/openstf/stf">openstf GitHub开源地址</a></p>
<p>功能：</p>
<ol>
<li>支持的系统：Android<ul>
<li><pre><code>版本限制：2.3.3 (SDK 版本 10) to 9.0 (SDK 版本 28)
</code></pre>
</li>
<li><pre><code>Android Wear 5.1（由于权限问题不支持5.0）
</code></pre>
</li>
<li><pre><code>Fire OS, CyanogenMod，基于Android的发行版
</code></pre>
</li>
<li><pre><code>当前任何功能都不需要root
</code></pre>
</li>
</ul>
</li>
<li>从浏览器远程控制任何设备</li>
<li>管理所有挂机设备</li>
</ol>
<h1 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h1><h2 id="需要使用到的工具或环境"><a href="#需要使用到的工具或环境" class="headerlink" title="需要使用到的工具或环境"></a>需要使用到的工具或环境</h2><ul>
<li>Node.js &gt;= 6.9 (首选最新稳定版)</li>
<li>ADB </li>
<li>RethinkDB &gt;= 2.2</li>
<li>GraphicsMagick (用来调整屏幕截图的大小)</li>
<li>ZeroMQ 自带安装，无需另行安装</li>
<li>Protocol Buffers 自带安装，无需另行安装</li>
<li>yasm 自带安装，无需另行安装 (为了编译 libjpeg-turbo)</li>
<li>pkg-config 安装后Node.js就可以找到自带库</li>
</ul>
<h2 id="通过brew安装依赖"><a href="#通过brew安装依赖" class="headerlink" title="通过brew安装依赖"></a>通过brew安装依赖</h2><p>在终端使用输入命令安装所需的依赖：</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">brew </span><span class="keyword">install </span>rethinkdb graphicsmagick zeromq protobuf yasm pkg-<span class="built_in">config</span></span><br></pre></td></tr></table></figure>
<p>若提示找不到brew，则需要先安装brew，参照：<br><a href="https://vic.kim/2019/05/20/Homebrew/">Homebrew</a></p>
<h2 id="Node-js安装"><a href="#Node-js安装" class="headerlink" title="Node.js安装"></a>Node.js安装</h2><p>Node.js版本强烈建议选择8.X 版本,如果是安装了最新10.X及以上版本后续安装stf过程中可能会出现报错，参考<a href="https://vic.kim/2019/08/21/Mac%E7%BB%88%E7%AB%AF%E5%AE%89%E8%A3%85%E6%8C%87%E5%AE%9A%E7%89%88%E6%9C%ACnode/#more">Mac终端安装指定版本node</a></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">node</span> -v</span><br><span class="line">    <span class="attribute">v8</span>.<span class="number">16</span>.<span class="number">0</span></span><br><span class="line"><span class="attribute">npm</span> -v</span><br><span class="line">    <span class="attribute">6</span>.<span class="number">4</span>.<span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>由于网络限制，为了保障后续安装顺利，这里我们建议增加 npm淘宝镜像。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https:<span class="regexp">//</span>registry.npm.taobao.org</span><br></pre></td></tr></table></figure>

<h2 id="adb安装"><a href="#adb安装" class="headerlink" title="adb安装"></a>adb安装</h2><p>使用brew安装，命令如下:</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">brew </span>cask <span class="keyword">install </span><span class="keyword">android-platform-tools</span></span><br></pre></td></tr></table></figure>
<p>安装完成后，连上Android 设备(开启usb-debug)输入命令adb –version查看是否安装成功。</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">adb</span> --version</span><br><span class="line">    <span class="attribute">Android</span> Debug Bridge version <span class="number">1</span>.<span class="number">0</span>.<span class="number">41</span></span><br><span class="line">    <span class="attribute">Version</span> <span class="number">29</span>.<span class="number">0</span>.<span class="number">1</span>-<span class="number">5644136</span></span><br><span class="line">    <span class="attribute">Installed</span> as /usr/local/bin/adb</span><br></pre></td></tr></table></figure>

<h2 id="stf安装"><a href="#stf安装" class="headerlink" title="stf安装"></a>stf安装</h2><p>这里我们使用上面安装的cnpm来安装</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> -g stf</span><br></pre></td></tr></table></figure>
<p>安装完成后使用命令stf doctor检查相关依赖是否安装正常。</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">stfs<span class="literal">-Mac</span><span class="literal">-mini</span>:~ stf<span class="variable">$</span> stf doctor</span><br><span class="line"><span class="number">2019</span><span class="literal">-08</span><span class="literal">-01T05</span>:<span class="number">17</span>:<span class="number">19.556</span>Z INF/<span class="built_in">cli</span>:doctor <span class="number">58578</span> [*] OS Arch: x64</span><br><span class="line"><span class="number">2019</span><span class="literal">-08</span><span class="literal">-01T05</span>:<span class="number">17</span>:<span class="number">19.558</span>Z INF/<span class="built_in">cli</span>:doctor <span class="number">58578</span> [*] OS Platform: darwin</span><br><span class="line"><span class="number">2019</span><span class="literal">-08</span><span class="literal">-01T05</span>:<span class="number">17</span>:<span class="number">19.558</span>Z INF/<span class="built_in">cli</span>:doctor <span class="number">58578</span> [*] OS Platform: <span class="number">18.0</span>.<span class="number">0</span></span><br><span class="line"><span class="number">2019</span><span class="literal">-08</span><span class="literal">-01T05</span>:<span class="number">17</span>:<span class="number">19.558</span>Z INF/<span class="built_in">cli</span>:doctor <span class="number">58578</span> [*] <span class="keyword">Using</span> Node 8.16.0</span><br><span class="line"><span class="number">2019</span><span class="literal">-08</span><span class="literal">-01T05</span>:<span class="number">17</span>:<span class="number">19.572</span>Z INF/<span class="built_in">cli</span>:doctor <span class="number">58578</span> [*] <span class="keyword">Using</span> ZeroMQ 4.3.2</span><br><span class="line"><span class="number">2019</span><span class="literal">-08</span><span class="literal">-01T05</span>:<span class="number">17</span>:<span class="number">19.581</span>Z INF/<span class="built_in">cli</span>:doctor <span class="number">58578</span> [*] <span class="keyword">Using</span> GraphicsMagick 1.3.33</span><br><span class="line"><span class="number">2019</span><span class="literal">-08</span><span class="literal">-01T05</span>:<span class="number">17</span>:<span class="number">19.582</span>Z INF/<span class="built_in">cli</span>:doctor <span class="number">58578</span> [*] <span class="keyword">Using</span> ADB 1.0.41</span><br><span class="line"><span class="number">2019</span><span class="literal">-08</span><span class="literal">-01T05</span>:<span class="number">17</span>:<span class="number">19.587</span>Z INF/<span class="built_in">cli</span>:doctor <span class="number">58578</span> [*] <span class="keyword">Using</span> RethinkDB 2.3.6</span><br><span class="line"><span class="number">2019</span><span class="literal">-08</span><span class="literal">-01T05</span>:<span class="number">17</span>:<span class="number">19.589</span>Z INF/<span class="built_in">cli</span>:doctor <span class="number">58578</span> [*] <span class="keyword">Using</span> ProtoBuf 3.7.1</span><br></pre></td></tr></table></figure>
<p>如果安装过程中出现如下错误，说明Node版本不兼容。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">make: *** [Release<span class="regexp">/obj.target/</span>bufferutil<span class="regexp">/src/</span>bufferutil.o] Error <span class="number">1</span></span><br><span class="line">gyp ERR! build error </span><br><span class="line">gyp ERR! stack Error: `make` failed with <span class="keyword">exit</span> code: <span class="number">2</span></span><br><span class="line">gyp ERR! stack     at ChildProcess.onExit (<span class="regexp">/usr/</span>local<span class="regexp">/lib/</span>node_modules<span class="regexp">/cnpm/</span>node_modules<span class="regexp">/node-gyp/</span>lib/build.js:<span class="number">262</span>:<span class="number">23</span>)</span><br><span class="line">gyp ERR! stack     at ChildProcess.emit (events.js:<span class="number">198</span>:<span class="number">13</span>)</span><br><span class="line">gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:<span class="number">248</span>:<span class="number">12</span>)</span><br><span class="line">gyp ERR! System Darwin <span class="number">18.0</span>.<span class="number">0</span></span><br><span class="line">gyp ERR! command <span class="string">&quot;/usr/local/bin/node&quot;</span> <span class="string">&quot;/usr/local/lib/node_modules/cnpm/node_modules/npminstall/node-gyp-bin/node-gyp.js&quot;</span> <span class="string">&quot;rebuild&quot;</span></span><br><span class="line">gyp ERR! cwd <span class="regexp">/usr/</span>local<span class="regexp">/lib/</span>node_modules<span class="regexp">/stf/</span>node_modules/_bufferutil@<span class="number">1.3</span>.<span class="number">0</span>@bufferutil</span><br><span class="line">gyp ERR! node -v v10.<span class="number">16.1</span></span><br><span class="line">gyp ERR! node-gyp -v v3.<span class="number">8.0</span></span><br><span class="line">gyp ERR! not ok </span><br><span class="line">[npminstall:runscript:error] bufferutil@^<span class="number">1.2</span>.<span class="number">1</span> has binding.gyp file, run <span class="string">&quot;node-gyp rebuild&quot;</span> error: RunScriptError: Run <span class="string">&quot;sh -c node-gyp rebuild&quot;</span> error, <span class="keyword">exit</span> code <span class="number">1</span></span><br><span class="line">Install fail! RunScriptError: Run <span class="string">&quot;sh -c node-gyp rebuild&quot;</span> error, <span class="keyword">exit</span> code <span class="number">1</span></span><br><span class="line">RunScriptError: Run <span class="string">&quot;sh -c node-gyp rebuild&quot;</span> error, <span class="keyword">exit</span> code <span class="number">1</span></span><br><span class="line">    at ChildProcess.proc.on.code (<span class="regexp">/usr/</span>local<span class="regexp">/lib/</span>node_modules<span class="regexp">/cnpm/</span>node_modules<span class="regexp">/runscript/i</span>ndex.js:<span class="number">96</span>:<span class="number">21</span>)</span><br><span class="line">    at ChildProcess.emit (events.js:<span class="number">198</span>:<span class="number">13</span>)</span><br><span class="line">    at maybeClose (internal/child_process.js:<span class="number">982</span>:<span class="number">16</span>)</span><br><span class="line">    at Process.ChildProcess._handle.onexit (internal/child_process.js:<span class="number">259</span>:<span class="number">5</span>)</span><br><span class="line">npminstall version: <span class="number">3.22</span>.<span class="number">1</span></span><br><span class="line">npminstall args: <span class="regexp">/usr/</span>local<span class="regexp">/bin/</span>node <span class="regexp">/usr/</span>local<span class="regexp">/lib/</span>node_modules<span class="regexp">/cnpm/</span>node_modules<span class="regexp">/npminstall/</span>bin<span class="regexp">/install.js --fix-bug-versions --china --userconfig=/</span>Users<span class="regexp">/stf/</span>.cnpmrc --disturl=https:<span class="regexp">//</span>npm.taobao.org<span class="regexp">/mirrors/</span>node --registry=https:<span class="regexp">//</span>r.npm.taobao.org -g stf --unsafe-perm</span><br></pre></td></tr></table></figure>
<p>解决方案:使用如下命令卸载Node，然后安装8.X版本的Node。</p>
<h2 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h2><h3 id="启动rethinkdb"><a href="#启动rethinkdb" class="headerlink" title="启动rethinkdb"></a>启动rethinkdb</h3><p>stf使用的是RethinkDB数据库，所以在启动stf前需要先启动RethinkDB，启动RethinkDB很简单，只需要执行以下命令：</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rethinkdb</span></span><br></pre></td></tr></table></figure>
<p>因为默认端口是8080，我已经有其他服务被占用，所以另开一个端口</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rethinkdb</span> --bind <span class="literal">all</span> --cache-size <span class="number">8192</span> --http-port <span class="number">9090</span></span><br></pre></td></tr></table></figure>
<p>–cache-size指定缓存大小<br>–http-port 指定端口</p>
<h3 id="启动stf"><a href="#启动stf" class="headerlink" title="启动stf"></a>启动stf</h3><p>另开一个终端，执行</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stf <span class="keyword">local</span></span><br></pre></td></tr></table></figure>
<p>如果想让其他机器连接到stf需要加上 –public-ip</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stf local --<span class="meta">public</span>-<span class="built_in">ip</span> &lt;本机的<span class="built_in">IP</span>地址&gt;</span><br></pre></td></tr></table></figure>
<p>最后输入<a target="_blank" rel="noopener" href="http://localhost:7100/">http://localhost:7100</a>或者 http://&lt;ip地址&gt;:7100即可访问stf地址，界面如下:<br><img src="/2019/08/21/Mac%20OS%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BASTF/stf-login.png" alt="stf-login"></p>
<p>输入用户名和邮箱即可登录，用户名和邮箱可以随便填写。<br>USB链接Android设备，开发者模式打开USB调试，就可以看到设备了</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://vic.kim/2019/05/27/Hexo%E6%96%87%E7%AB%A0%E5%8A%A0%E5%AF%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/smile.jpg">
      <meta itemprop="name" content="Vic">
      <meta itemprop="description" content="人生苦短，我学Python">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Vicの博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/05/27/Hexo%E6%96%87%E7%AB%A0%E5%8A%A0%E5%AF%86/" class="post-title-link" itemprop="url">Hexo文章加密</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2019-05-27 10:03:50 / 修改时间：10:04:53" itemprop="dateCreated datePublished" datetime="2019-05-27T10:03:50+08:00">2019-05-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Hexo-Next/" itemprop="url" rel="index"><span itemprop="name">Hexo Next</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>hexo-blog-encrypt插件<a target="_blank" rel="noopener" href="https://github.com/MikeCoder/hexo-blog-encrypt/blob/master/ReadMe.zh.md">GitHub</a>官网</p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>博客根目录下运行以下命令</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install <span class="comment">--save hexo-blog-encrypt</span></span><br></pre></td></tr></table></figure>

<h1 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h1><h2 id="首先在-站点配置文件-中启用该插件"><a href="#首先在-站点配置文件-中启用该插件" class="headerlink" title="首先在 站点配置文件 中启用该插件:"></a>首先在 站点配置文件 中启用该插件:</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">encrypt:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>##然后在你的文章的头部添加上对应的字段，如 password, abstract, message</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">文章加密</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2019-01-04T22:20:13.000Z</span></span><br><span class="line"><span class="attr">category:</span> <span class="string">教程</span></span><br><span class="line"><span class="attr">tags:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">博客</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Hexo</span></span><br><span class="line"><span class="attr">keywords:</span> <span class="string">博客文章密码</span></span><br><span class="line"><span class="attr">password:</span> <span class="string">TloveY</span></span><br><span class="line"><span class="attr">abstract:</span> <span class="string">密码：TloveY</span></span><br><span class="line"><span class="attr">message:</span>  <span class="string">输入密码，查看文章</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>
<ul>
<li>password: 是该博客加密使用的密码</li>
<li>abstract: 是该博客的摘要，会显示在博客的列表页</li>
<li>message: 这个是博客查看时，密码输入框上面的描述性文字</li>
</ul>
<h2 id="如果你想对-TOC-也进行加密，则在-article-ejs-中将-TOC-的生成代码修改成如下："><a href="#如果你想对-TOC-也进行加密，则在-article-ejs-中将-TOC-的生成代码修改成如下：" class="headerlink" title="如果你想对 TOC 也进行加密，则在 article.ejs 中将 TOC 的生成代码修改成如下："></a>如果你想对 TOC 也进行加密，则在 article.ejs 中将 TOC 的生成代码修改成如下：</h2><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">&lt;% if(post.toc == true)&#123; %&gt;</span></span><br><span class="line">        <span class="params">&lt;div id=&quot;toc-div&quot; class=&quot;toc-article&quot; &lt;% if (post.encrypt == true) &#123; %&gt;</span>style=<span class="string">&quot;display:none&quot;</span> <span class="params">&lt;% &#125; %&gt;</span>&gt;</span><br><span class="line">            <span class="params">&lt;strong class=&quot;toc-title&quot;&gt;</span>Index<span class="params">&lt;/strong&gt;</span></span><br><span class="line">            <span class="params">&lt;% if (post.encrypt == true) &#123; %&gt;</span></span><br><span class="line">                <span class="params">&lt;%- toc(post.origin) %&gt;</span></span><br><span class="line">            <span class="params">&lt;% &#125; else &#123; %&gt;</span></span><br><span class="line">                <span class="params">&lt;%- toc(post.content) %&gt;</span></span><br><span class="line">            <span class="params">&lt;% &#125; %&gt;</span></span><br><span class="line">        <span class="params">&lt;/div&gt;</span></span><br><span class="line">    <span class="params">&lt;% &#125; %&gt;</span></span><br><span class="line">    <span class="params">&lt;%- post.content %&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="自定义"><a href="#自定义" class="headerlink" title="自定义"></a>自定义</h1><h2 id="如果你对默认的主题不满意，或者希望修改默认的提示和摘要内容，你可以添加如下配置在-站点配置文件-中。"><a href="#如果你对默认的主题不满意，或者希望修改默认的提示和摘要内容，你可以添加如下配置在-站点配置文件-中。" class="headerlink" title="如果你对默认的主题不满意，或者希望修改默认的提示和摘要内容，你可以添加如下配置在 站点配置文件 中。"></a>如果你对默认的主题不满意，或者希望修改默认的提示和摘要内容，你可以添加如下配置在 站点配置文件 中。</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">encrypt:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">default_abstract:</span> <span class="string">这是一篇加密文章，内容可能是个人情感宣泄或者收费技术。如果你确实想看，请与我联系。</span></span><br><span class="line">  <span class="attr">default_message:</span> <span class="string">输入密码，查看文章。</span></span><br></pre></td></tr></table></figure>
<p>这样，对于每一篇需要加密的文章就不必都在在头部添加 abstract 和 message 字段了，脚本会自动添加默认的内容填充。</p>
<h2 id="如果你希望对某一篇特定的文章做特殊处理（如本文的-abstract-，可以在对应文章的头部添加"><a href="#如果你希望对某一篇特定的文章做特殊处理（如本文的-abstract-，可以在对应文章的头部添加" class="headerlink" title="如果你希望对某一篇特定的文章做特殊处理（如本文的 abstract ，可以在对应文章的头部添加"></a>如果你希望对某一篇特定的文章做特殊处理（如本文的 abstract ，可以在对应文章的头部添加</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">文章加密</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2019-01-04T22:20:13.000Z</span></span><br><span class="line"><span class="attr">category:</span> <span class="string">教程</span></span><br><span class="line"><span class="attr">tags:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">博客</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Hexo</span></span><br><span class="line"><span class="attr">keywords:</span> <span class="string">博客文章密码</span></span><br><span class="line"><span class="attr">password:</span> <span class="string">TloveY</span></span><br><span class="line"><span class="attr">abstract:</span> <span class="string">密码：TloveY</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>
<p>此时，博客头部的 abstract 会覆盖 站点配置文件 的 default_abstract 实现自定义。</p>
<h1 id="存在问题"><a href="#存在问题" class="headerlink" title="存在问题"></a>存在问题</h1><ul>
<li>如果你开启了 字数统计功能 的话，那么本文的字数会显得比实际值大。</li>
<li>加密文章内部分脚本会失效，已知 代码复制 失效。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://vic.kim/2019/05/26/Hexo%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%90%8C%E8%90%8C%E5%93%92/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/smile.jpg">
      <meta itemprop="name" content="Vic">
      <meta itemprop="description" content="人生苦短，我学Python">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Vicの博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/05/26/Hexo%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%90%8C%E8%90%8C%E5%93%92/" class="post-title-link" itemprop="url">Hexo之添加萌萌哒</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-05-26 13:51:11" itemprop="dateCreated datePublished" datetime="2019-05-26T13:51:11+08:00">2019-05-26</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2019-05-27 10:15:55" itemprop="dateModified" datetime="2019-05-27T10:15:55+08:00">2019-05-27</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Hexo-Next/" itemprop="url" rel="index"><span itemprop="name">Hexo Next</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h1><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install <span class="comment">--save hexo-helper-live2d</span></span><br></pre></td></tr></table></figure>

<h1 id="复制你喜欢的模型名字：hijiki"><a href="#复制你喜欢的模型名字：hijiki" class="headerlink" title="复制你喜欢的模型名字：hijiki"></a>复制你喜欢的模型名字：hijiki</h1><p><img src="/2019/05/26/Hexo%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%90%8C%E8%90%8C%E5%93%92/Epsilon2.1.gif" alt="Epsilon2.1"></p>
<center>Epsilon2.1</center>
![Gantzert_Felixande](/2019/05/26/Hexo%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%90%8C%E8%90%8C%E5%93%92/Gantzert_Felixander.gif)
<center>Gantzert_Felixande</center>
![haru](/2019/05/26/Hexo%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%90%8C%E8%90%8C%E5%93%92/haru.gif)
<center>haru</center>
![haruto](/2019/05/26/Hexo%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%90%8C%E8%90%8C%E5%93%92/haruto.gif)
<center>haruto</center>
![hibiki](/2019/05/26/Hexo%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%90%8C%E8%90%8C%E5%93%92/hibiki.gif)
<center>hibiki</center>
![hijiki](/2019/05/26/Hexo%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%90%8C%E8%90%8C%E5%93%92/hijiki.gif)
<center>hijiki</center>
![koharu](/2019/05/26/Hexo%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%90%8C%E8%90%8C%E5%93%92/koharu.gif)
<center>koharu</center>
![miku](/2019/05/26/Hexo%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%90%8C%E8%90%8C%E5%93%92/miku.gif)
<center>miku</center>
![ni-j](/2019/05/26/Hexo%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%90%8C%E8%90%8C%E5%93%92/ni-j.gif)
<center>ni-j</center>
![nico](/2019/05/26/Hexo%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%90%8C%E8%90%8C%E5%93%92/nico.gif)
<center>nico</center>
![nietzche](/2019/05/26/Hexo%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%90%8C%E8%90%8C%E5%93%92/nietzche.gif)
<center>nietzche</center>
![nipsilon](/2019/05/26/Hexo%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%90%8C%E8%90%8C%E5%93%92/nipsilon.gif)
<center>nipsilon</center>
![nito](/2019/05/26/Hexo%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%90%8C%E8%90%8C%E5%93%92/nito.gif)
<center>nito</center>
![shizuku](/2019/05/26/Hexo%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%90%8C%E8%90%8C%E5%93%92/shizuku.gif)
<center>shizuku</center>
![tororo](/2019/05/26/Hexo%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%90%8C%E8%90%8C%E5%93%92/tororo.gif)
<center>tororo</center>
![tsumiki](/2019/05/26/Hexo%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%90%8C%E8%90%8C%E5%93%92/tsumiki.gif)
<center>tsumiki</center>
![Unitychan](/2019/05/26/Hexo%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%90%8C%E8%90%8C%E5%93%92/Unitychan.gif)
<center>Unitychan</center>
![wanko](/2019/05/26/Hexo%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%90%8C%E8%90%8C%E5%93%92/wanko.gif)
<center>wanko</center>
![z16](/2019/05/26/Hexo%E4%B9%8B%E6%B7%BB%E5%8A%A0%E8%90%8C%E8%90%8C%E5%93%92/z16.gif)
<center>z16</center>

<h1 id="将以下代码添加到主题配置文件-config-yml，修改-lt-你喜欢的模型名字-gt-："><a href="#将以下代码添加到主题配置文件-config-yml，修改-lt-你喜欢的模型名字-gt-：" class="headerlink" title="将以下代码添加到主题配置文件_config.yml，修改&lt;你喜欢的模型名字&gt;："></a>将以下代码添加到主题配置文件_config.yml，修改&lt;你喜欢的模型名字&gt;：</h1><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">live2d:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">scriptFrom:</span> <span class="string">local</span></span><br><span class="line">  <span class="attr">pluginRootPath:</span> <span class="string">live2dw/</span></span><br><span class="line">  <span class="attr">pluginJsPath:</span> <span class="string">lib/</span></span><br><span class="line">  <span class="attr">pluginModelPath:</span> <span class="string">assets/</span></span><br><span class="line">  <span class="attr">tagMode:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">log:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">model:</span></span><br><span class="line">    <span class="attr">use:</span> <span class="string">live2d-widget-model-&lt;你喜欢的模型名字&gt;</span></span><br><span class="line">  <span class="attr">display:</span></span><br><span class="line">    <span class="attr">position:</span> <span class="string">right</span></span><br><span class="line">    <span class="attr">width:</span> <span class="number">150</span></span><br><span class="line">    <span class="attr">height:</span> <span class="number">300</span></span><br><span class="line">  <span class="attr">mobile:</span></span><br><span class="line">    <span class="attr">show:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h1 id="建配置文件"><a href="#建配置文件" class="headerlink" title="建配置文件"></a>建配置文件</h1><ul>
<li>在站点目录下建文件夹live2d_models，</li>
<li>再在live2d_models下建文件夹&lt;你喜欢的模型名字&gt;,</li>
<li>再在&lt;你喜欢的模型名字&gt;下建json文件：&lt;你喜欢的模型名字&gt;.model.json</li>
</ul>
<h1 id="安装模型。在命令行（即Git-Bash）运行以下命令即可："><a href="#安装模型。在命令行（即Git-Bash）运行以下命令即可：" class="headerlink" title="安装模型。在命令行（即Git Bash）运行以下命令即可："></a>安装模型。在命令行（即Git Bash）运行以下命令即可：</h1><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">npm</span> install –save live<span class="number">2</span>d-widget-model-&lt;你喜欢的模型名字&gt;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://vic.kim/2019/05/26/Hexo%20NexT%20%E4%BB%A3%E7%A0%81%E5%9D%97%E5%A4%8D%E5%88%B6%E5%8A%9F%E8%83%BD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/smile.jpg">
      <meta itemprop="name" content="Vic">
      <meta itemprop="description" content="人生苦短，我学Python">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Vicの博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/05/26/Hexo%20NexT%20%E4%BB%A3%E7%A0%81%E5%9D%97%E5%A4%8D%E5%88%B6%E5%8A%9F%E8%83%BD/" class="post-title-link" itemprop="url">Hexo NexT 代码块复制功能</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2019-05-26 12:32:16 / 修改时间：14:39:26" itemprop="dateCreated datePublished" datetime="2019-05-26T12:32:16+08:00">2019-05-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Hexo-Next/" itemprop="url" rel="index"><span itemprop="name">Hexo Next</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>为了提高博客代码块的用户体验，仅仅代码高亮还不行，最好还能一键复制代码。故此文将讲述Hexo NexT主题博客的代码块复制功能配置。</p>
<h1 id="下载clipboard-js"><a href="#下载clipboard-js" class="headerlink" title="下载clipboard.js"></a>下载clipboard.js</h1><p>三方插件 clipboardjs ，相关介绍和兼容性我就不赘述了，去它<a target="_blank" rel="noopener" href="https://clipboardjs.com/">主页</a>或<a target="_blank" rel="noopener" href="https://github.com/zenorocha/clipboard.js">github</a>上看。</p>
<p>下载地址：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/zenorocha/clipboard.js/master/dist/clipboard.js">clipboard.js</a></li>
<li><a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/zenorocha/clipboard.js/master/dist/clipboard.min.js">clipboard.min.js</a><br>保存文件<code>clipboard.js</code>、<code>clipboard.min.js </code>，到目录<code>\themes\next\source\js\src</code>下</li>
</ul>
<h1 id="clipboardjs-使用"><a href="#clipboardjs-使用" class="headerlink" title="clipboardjs 使用"></a>clipboardjs 使用</h1><p>在<code>\themes\next\source\js\src</code>目录下，创建<code>clipboard-use.js</code>文件，文件内容如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*页面载入完成后，创建复制按钮*/</span></span><br><span class="line">!<span class="function"><span class="keyword">function</span> (<span class="params">e, t, a</span>) </span>&#123; </span><br><span class="line">  <span class="comment">/* code */</span></span><br><span class="line">  <span class="keyword">var</span> initCopyCode = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> copyHtml = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    copyHtml += <span class="string">&#x27;&lt;button class=&quot;btn-copy&quot; data-clipboard-snippet=&quot;&quot;&gt;&#x27;</span>;</span><br><span class="line">    copyHtml += <span class="string">&#x27;  &lt;i class=&quot;fa fa-globe&quot;&gt;&lt;/i&gt;&lt;span&gt;copy&lt;/span&gt;&#x27;</span>;</span><br><span class="line">    copyHtml += <span class="string">&#x27;&lt;/button&gt;&#x27;</span>;</span><br><span class="line">    $(<span class="string">&quot;.highlight .code pre&quot;</span>).before(copyHtml);</span><br><span class="line">    <span class="keyword">new</span> ClipboardJS(<span class="string">&#x27;.btn-copy&#x27;</span>, &#123;</span><br><span class="line">        target: <span class="function"><span class="keyword">function</span>(<span class="params">trigger</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> trigger.nextElementSibling;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  initCopyCode();</span><br><span class="line">&#125;(<span class="built_in">window</span>, <span class="built_in">document</span>);</span><br></pre></td></tr></table></figure>
<p>在<code>.\themes\next\source\css\_custom\custom.styl</code>文件中添加下面代码：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">//代码块复制按钮</span><br><span class="line"><span class="selector-class">.highlight</span>&#123;</span><br><span class="line">  //方便copy代码按钮（btn-copy）的定位</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.btn-copy</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#eee</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(<span class="number">#fcfcfc</span>,<span class="number">#eee</span>);</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#d5d5d5</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    -webkit-user-select: none;</span><br><span class="line">    -moz-user-select: none;</span><br><span class="line">    -ms-user-select: none;</span><br><span class="line">    user-select: none;</span><br><span class="line">    -webkit-appearance: none;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">    -webkit-<span class="attribute">transition</span>: opacity .<span class="number">3s</span> ease-in-out;</span><br><span class="line">    -o-<span class="attribute">transition</span>: opacity .<span class="number">3s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">transition</span>: opacity .<span class="number">3s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">2px</span> <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.btn-copy</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.highlight</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.btn-copy</span>&#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h1><p>在<code>.\themes\next\layout\_layout.swig</code>文件中，添加引用（注：在 swig 末尾或 body 结束标签（</body>）之前添加）：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 代码块复制功能 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/js/clipboard.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/js/clipboard-use.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2019/05/26/Hexo%20NexT%20%E4%BB%A3%E7%A0%81%E5%9D%97%E5%A4%8D%E5%88%B6%E5%8A%9F%E8%83%BD/15588460292199.jpg" alt="添加位置示例"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://vic.kim/2019/05/25/Hexo%E5%8D%9A%E5%AE%A2%E4%BC%98%E5%8C%96%E4%B9%8BNext%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/smile.jpg">
      <meta itemprop="name" content="Vic">
      <meta itemprop="description" content="人生苦短，我学Python">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Vicの博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/05/25/Hexo%E5%8D%9A%E5%AE%A2%E4%BC%98%E5%8C%96%E4%B9%8BNext%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96/" class="post-title-link" itemprop="url">Hexo博客优化之Next主题美化</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-05-25 18:07:29" itemprop="dateCreated datePublished" datetime="2019-05-25T18:07:29+08:00">2019-05-25</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2019-05-27 10:03:03" itemprop="dateModified" datetime="2019-05-27T10:03:03+08:00">2019-05-27</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Hexo-Next/" itemprop="url" rel="index"><span itemprop="name">Hexo Next</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>有了前面几篇博客的介绍，我们就可以很容易的搭建我们的博客了，不过既然是属于自己的博客网站，自然也就想让其更加美观，更有意思，所以呢我下面介绍一下Hexo博客的主题美化操作。</p>
<p>Hexo博客支持很多主题风格，其中<a target="_blank" rel="noopener" href="https://github.com/theme-next/hexo-theme-next">Next</a>主题是Github上Star最多的主题，其一直在更新维护，支持非常多的外部插件和功能选项。我目前使用的是NexT.Gemini v7.1.1版本，下面我会介绍基于Next7主题的界面美化。</p>
<h1 id="命名"><a href="#命名" class="headerlink" title="命名"></a>命名</h1><p>在Hexo中有2份主要的配置文件，其名称都是_config.yml。 其中，一份位于博客根目录下，主要包含 Hexo 本身的配置；另一份位于themes/next/目录下，用于配置主题相关的选项。</p>
<ul>
<li><strong>博客配置文件：博客根目录下_config.yml</strong></li>
<li><strong>主题配置文件：themes/next/目录下_config.yml</strong></li>
</ul>
<h1 id="基础设置"><a href="#基础设置" class="headerlink" title="基础设置"></a>基础设置</h1><p>##设置站点名、作者昵称和站点描述等内容<br>打开博客配置文件，博客根目录下_config.yml</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># Site</span></span><br><span class="line"><span class="symbol">title:</span> Vicの博客</span><br><span class="line"><span class="symbol">subtitle:</span> 测试攻城狮</span><br><span class="line"><span class="symbol">description:</span> 人生苦短，我学Python</span><br><span class="line"><span class="symbol">keywords:</span></span><br><span class="line"><span class="symbol">author:</span> Vic</span><br><span class="line"><span class="symbol">language:</span> <span class="built_in">zh</span>-CN</span><br><span class="line"><span class="symbol">timezone:</span> Asia/Shanghai</span><br></pre></td></tr></table></figure>

<h2 id="Next主题的安装配置"><a href="#Next主题的安装配置" class="headerlink" title="Next主题的安装配置"></a>Next主题的安装配置</h2><p>Next主题的安装方式很简单，只需要在<em><strong>博客根目录下</strong></em>执行：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/theme-next/</span>hexo-theme-<span class="keyword">next</span> themes/<span class="keyword">next</span></span><br></pre></td></tr></table></figure>
<p>然后设置博客配置文件_config.yml：（博客根目录下的_config.yml）</p>
<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">theme:</span> <span class="keyword">next</span></span><br></pre></td></tr></table></figure>
<p>即可将我们的Hexo博客主题替换为Next主题。</p>
<h1 id="主题配置"><a href="#主题配置" class="headerlink" title="主题配置"></a>主题配置</h1><h2 id="Next主题风格"><a href="#Next主题风格" class="headerlink" title="Next主题风格"></a>Next主题风格</h2><p>打开<code>themes/next/</code>下的<code>_config.yml</code>，查找<code>scheme</code>，可以看到如下四种不同的风格方案：</p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#scheme: Muse</span></span><br><span class="line"><span class="meta">#scheme: Mist</span></span><br><span class="line"><span class="meta">#scheme: Pisces</span></span><br><span class="line">scheme: Gemini</span><br></pre></td></tr></table></figure>
<p>去掉#注释，即启用对应的scheme，博主采用Gemini主题。</p>
<h2 id="设置菜单及对应页面"><a href="#设置菜单及对应页面" class="headerlink" title="设置菜单及对应页面"></a>设置菜单及对应页面</h2><ul>
<li><p>打开themes/next/下的_config.yml，查找menu</p>
  <figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">menu:</span></span><br><span class="line"><span class="symbol">  home:</span> / || home</span><br><span class="line"><span class="symbol">  about:</span> <span class="meta-keyword">/about/</span> || user</span><br><span class="line"><span class="symbol">  tags:</span> <span class="meta-keyword">/tags/</span> || tags</span><br><span class="line"><span class="symbol">  categories:</span> <span class="meta-keyword">/categories/</span> || th</span><br><span class="line"><span class="symbol">  archives:</span> <span class="meta-keyword">/archives/</span> || archive</span><br><span class="line">  <span class="meta">#schedule: /schedule/ || calendar</span></span><br><span class="line">  <span class="meta">#sitemap: /sitemap.xml || sitemap</span></span><br><span class="line">  <span class="meta">#commonweal: /404/ || heartbeat</span></span><br><span class="line"><span class="symbol">  favorite:</span> <span class="meta-keyword">/favorite/</span> || fa-star</span><br></pre></td></tr></table></figure>
<p>  去掉<code>#</code>注释即可显示对应的菜单项，也可自定义新的菜单项。<code>||</code>之前的值是目标链接，之后的是分类页面的图标，图标名称来自于FontAwesome icon。若没有配置图标，默认会使用问号图标。<br>  例如上面添加：<code>favorite: /favorite/ || fa-star</code></p>
</li>
<li><p>新建一个页面，命名为 categories</p>
  <figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> <span class="type">page</span> <span class="string">&quot;favorite&quot;</span></span><br></pre></td></tr></table></figure>
<p>  此时在根目录的source文件夹下会生成一个favorite文件夹，文件中有一个index.md文件，文件内容修改增加 type 属性</p>
  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Favorite</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2019-05-20 19:11:41</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">&quot;favorite&quot;</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure></li>
<li><p>新添加的菜单需要翻译对应的中文<br>  打开hexo/theme/next/languages/zh-CN.yml，在menu下自定义，如：</p>
  <figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">menu:</span></span><br><span class="line"><span class="symbol">  favorite:</span> 收藏夹</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="一般配置"><a href="#一般配置" class="headerlink" title="一般配置"></a>一般配置</h2><ul>
<li><p>Next主题一般配置：</p>
  <figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">override：false <span class="meta">#表示是否将主题置为默认样式</span></span><br><span class="line"><span class="symbol">cache:</span></span><br><span class="line"><span class="symbol">	enable:</span>true <span class="meta">#表示添加缓存功能，这样浏览器后续打开我们的博客网站会更快</span></span><br><span class="line"><span class="symbol">menu:</span> <span class="meta">#设置博客各个页面的相对路径，默认根路径是blog/source</span></span><br><span class="line"><span class="symbol">  home:</span> / || home</span><br><span class="line"><span class="symbol">  about:</span> <span class="meta-keyword">/about/</span> || user</span><br><span class="line"><span class="symbol">  tags:</span> <span class="meta-keyword">/tags/</span> || tags</span><br><span class="line"><span class="symbol">  categories:</span> <span class="meta-keyword">/categories/</span> || th</span><br><span class="line"><span class="symbol">  archives:</span> <span class="meta-keyword">/archives/</span> || archive</span><br><span class="line">  <span class="meta">#schedule: /schedule/ || calendar #日历</span></span><br><span class="line">  <span class="meta">#sitemap: /sitemap.xml || sitemap #站点地图，供搜索引擎爬取</span></span><br><span class="line">  <span class="meta">#commonweal: /404/ || heartbeat # 腾讯公益404</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># Enable/Disable menu icons / item badges.</span></span><br><span class="line"><span class="symbol">menu_settings:</span></span><br><span class="line"><span class="symbol">  icons:</span> true <span class="meta"># 是否显示各个页面的图标</span></span><br><span class="line"><span class="symbol">  badges:</span> true <span class="meta"># 是否显示分类/标签/归档页的内容量</span></span><br><span class="line"><span class="meta"># Schemes</span></span><br><span class="line"><span class="symbol">scheme:</span> Gemini</span><br></pre></td></tr></table></figure></li>
<li><p>站点配置MyBlog/_config.yml文件的基本配置为</p>
  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hexo Configuration</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/configuration.html</span></span><br><span class="line"><span class="comment">## Source: https://github.com/hexojs/hexo/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Vicの博客</span> <span class="comment"># 网站标题</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">测试攻城狮</span> <span class="comment"># 网站子标题</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">人生苦短，我学Python</span> <span class="comment"># 网站描述</span></span><br><span class="line"><span class="attr">keywords:</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">Vic</span> <span class="comment"># 网站作者，也就是您的名字</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span> <span class="comment"># 网站使用的语言</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">Asia/Shanghai</span> <span class="comment"># 网站时区。Hexo 预设使用您电脑的时区。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as &#x27;http://yoursite.com/child&#x27; and root as &#x27;/child/&#x27;</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">https://vic.kim</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span></span><br><span class="line"><span class="attr">permalink_defaults:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Directory</span></span><br><span class="line"><span class="attr">source_dir:</span> <span class="string">source</span> <span class="comment"># 资源文件夹，这个文件夹用来存放内容，例如我们用markdown编写的博文</span></span><br><span class="line"><span class="attr">public_dir:</span> <span class="string">public</span> <span class="comment"># 公共文件夹，这个文件夹用于存放生成的静态博客文件。</span></span><br><span class="line"><span class="attr">tag_dir:</span> <span class="string">tags</span> <span class="comment"># 标签文件夹</span></span><br><span class="line"><span class="attr">archive_dir:</span> <span class="string">archives</span> <span class="comment"># 归档文件夹</span></span><br><span class="line"><span class="attr">category_dir:</span> <span class="string">categories</span> <span class="comment"># 分类文件夹</span></span><br><span class="line"><span class="attr">code_dir:</span> <span class="string">downloads/code</span> <span class="comment"># Include code 文件夹</span></span><br><span class="line"><span class="attr">i18n_dir:</span> <span class="string">:lang</span> <span class="comment"># 国际化（i18n）文件夹</span></span><br><span class="line"><span class="attr">skip_render:</span> <span class="comment"># 跳过指定文件的渲染，您可使用 glob 来配置路径。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Search</span></span><br><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span> <span class="comment"># 索引文件的路径，相对于站点根目录</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span> <span class="comment"># 搜索范围，默认是 post，还可以选择 page、all，设置成 all 表示搜索所有页面</span></span><br><span class="line">  <span class="attr">format:</span> <span class="string">html</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">10000</span> <span class="comment"># 限制搜索的条目数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Writing</span></span><br><span class="line"><span class="attr">new_post_name:</span> <span class="string">:title.md</span> <span class="comment"># 默认的新博文名称</span></span><br><span class="line"><span class="attr">default_layout:</span> <span class="string">post</span> <span class="comment"># 默认布局</span></span><br><span class="line"><span class="attr">titlecase:</span> <span class="literal">false</span> <span class="comment"># 把标题转换为 titlecase（titlecase指的是将每个单词首字母转换成大写）</span></span><br><span class="line"><span class="attr">external_link:</span> <span class="literal">true</span> <span class="comment"># 在新标签中打开链接</span></span><br><span class="line"><span class="attr">filename_case:</span> <span class="number">0</span> <span class="comment">#把文件名称转换为 (1) 小写或 (2) 大写, 0表示不变</span></span><br><span class="line"><span class="attr">render_drafts:</span> <span class="literal">false</span> <span class="comment"># 是否显示草稿</span></span><br><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span> <span class="comment">#是否启用资源文件夹（用来存放相对路径图片或文件）</span></span><br><span class="line"><span class="attr">relative_link:</span> <span class="literal">false</span> <span class="comment"># 把链接改为与根目录的相对位址</span></span><br><span class="line"><span class="attr">future:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#是否开启代码高亮</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">false</span> <span class="comment">#是否增加代码行号</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">false</span> <span class="comment">#自动判断代码语言</span></span><br><span class="line">  <span class="attr">tab_replace:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Home page setting</span></span><br><span class="line"><span class="comment"># path: Root path for your blogs index page. (default = &#x27;&#x27;)</span></span><br><span class="line"><span class="comment"># per_page: Posts displayed per page. (0 = disable pagination)</span></span><br><span class="line"><span class="comment"># order_by: Posts order. (Order by date descending by default)</span></span><br><span class="line"><span class="attr">index_generator:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">&#x27;&#x27;</span> <span class="comment">#博客的默认路径</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="number">10</span> <span class="comment">#每页博客数量上限</span></span><br><span class="line">  <span class="attr">order_by:</span> <span class="string">-date</span> <span class="comment">#博客排序</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Category &amp; Tag</span></span><br><span class="line"><span class="attr">default_category:</span> <span class="string">uncategorized</span> <span class="comment"># 默认分类, uncategorized表示未分类</span></span><br><span class="line"><span class="attr">category_map:</span> <span class="comment"># 分类别名</span></span><br><span class="line"><span class="attr">tag_map:</span> <span class="comment"># 标签别名</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Date / Time format</span></span><br><span class="line"><span class="comment">## Hexo uses Moment.js to parse and display date</span></span><br><span class="line"><span class="comment">## You can customize the date format as defined in</span></span><br><span class="line"><span class="comment">## http://momentjs.com/docs/#/displaying/format/</span></span><br><span class="line"><span class="attr">date_format:</span> <span class="string">YYYY-MM-DD</span> <span class="comment">#博客日期格式</span></span><br><span class="line"><span class="attr">time_format:</span> <span class="string">HH:mm:ss</span> <span class="comment">#博客时间格式</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Pagination</span></span><br><span class="line"><span class="comment">## Set per_page to 0 to disable pagination</span></span><br><span class="line"><span class="attr">per_page:</span> <span class="number">10</span> <span class="comment"># 每页显示的文章量，如果设置值为0，则表示禁止分页</span></span><br><span class="line"><span class="attr">pagination_dir:</span> <span class="string">page</span> <span class="comment"># 分页目录</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">next</span> <span class="comment">#选择博客主题，名字为themes中选择的主题文件夹名称</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/HappyVic/HappyVic.github.io</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># hexo-tag-cloud</span></span><br><span class="line"><span class="attr">tag_cloud:</span></span><br><span class="line">    <span class="attr">textFont:</span> <span class="string">Trebuchet</span> <span class="string">MS,</span> <span class="string">Helvetica</span></span><br><span class="line">    <span class="attr">textColor:</span> <span class="string">&#x27;#333&#x27;</span></span><br><span class="line">    <span class="attr">textHeight:</span> <span class="number">25</span></span><br><span class="line">    <span class="attr">outlineColor:</span> <span class="string">&#x27;#E2E1D1&#x27;</span></span><br><span class="line">    <span class="attr">maxSpeed:</span> <span class="number">0.1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="美化"><a href="#美化" class="headerlink" title="美化"></a>美化</h1><h2 id="设置头像"><a href="#设置头像" class="headerlink" title="设置头像"></a>设置头像</h2><p>找自己喜欢的图，放至<code>themes/next/source/images/</code>文件夹下<br>打开<code>themes/next/</code>下的<code>_config.yml</code>，查找<code>Sidebar Avatar</code>。修改<code>url</code>的值</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Sidebar Avatar</span><br><span class="line"># in theme directory(<span class="keyword">source</span><span class="regexp">/images): /im</span>ages/avatar.gif</span><br><span class="line"># in site  directory(<span class="keyword">source</span><span class="regexp">/uploads): /u</span>ploads/avatar.gif</span><br><span class="line">url: <span class="regexp">/images/</span>smile.jpg</span><br></pre></td></tr></table></figure>
<p><code>url</code>的值是图片的链接地址</p>
<h2 id="网站图标设置"><a href="#网站图标设置" class="headerlink" title="网站图标设置"></a>网站图标设置</h2><p>我们博客的默认图标是H，不过Next支持修改图标</p>
<ul>
<li>图标素材网站：<a target="_blank" rel="noopener" href="https://www.easyicon.net/">easyicon</a>、<a target="_blank" rel="noopener" href="https://www.iconfont.cn/">iconfont</a></li>
<li>下载16x16以及32x32大小的PNG格式图标，置于<code>/themes/next/source/images/</code>下</li>
<li>打开<code>themes/next/</code>下的<code>_config.yml</code>，查找<code>favicon</code>  <figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">favicon:</span><br><span class="line">  small: <span class="regexp">/images/</span>cat-<span class="number">16</span>x16-<span class="keyword">next</span>.png</span><br><span class="line">  medium: <span class="regexp">/images/</span>cat-<span class="number">32</span>x32-<span class="keyword">next</span>.png</span><br><span class="line">  apple_touch_icon: <span class="regexp">/images/</span>apple-touch-icon-<span class="keyword">next</span>.png</span><br><span class="line">  safari_pinned_tab: <span class="regexp">/images/</span>logo.svg</span><br><span class="line">  #android_manifest: <span class="regexp">/images/m</span>anifest.json</span><br><span class="line">  #ms_browserconfig: <span class="regexp">/images/</span>browserconfig.xml</span><br></pre></td></tr></table></figure>
  修改small和medium的路径为下载的图标路径</li>
</ul>
<h2 id="鼠标点击特效"><a href="#鼠标点击特效" class="headerlink" title="鼠标点击特效"></a>鼠标点击特效</h2><ul>
<li>鼠标点击红心特效<br>  在<code>/themes/next/source/js/src</code>下新建文件 <code>clicklove.js </code>，接着把下面的代码拷贝粘贴到<code>clicklove.js</code>文件中：  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!<span class="function"><span class="keyword">function</span>(<span class="params">e,t,a</span>)</span>&#123;<span class="function"><span class="keyword">function</span> <span class="title">n</span>(<span class="params"></span>)</span>&#123;c(<span class="string">&quot;.heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: &#x27;&#x27;;width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;&quot;</span>),o(),r()&#125;<span class="function"><span class="keyword">function</span> <span class="title">r</span>(<span class="params"></span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> e=<span class="number">0</span>;e&lt;d.length;e++)d[e].alpha&lt;=<span class="number">0</span>?(t.body.removeChild(d[e].el),d.splice(e,<span class="number">1</span>)):(d[e].y--,d[e].scale+=<span class="number">.004</span>,d[e].alpha-=<span class="number">.013</span>,d[e].el.style.cssText=<span class="string">&quot;left:&quot;</span>+d[e].x+<span class="string">&quot;px;top:&quot;</span>+d[e].y+<span class="string">&quot;px;opacity:&quot;</span>+d[e].alpha+<span class="string">&quot;;transform:scale(&quot;</span>+d[e].scale+<span class="string">&quot;,&quot;</span>+d[e].scale+<span class="string">&quot;) rotate(45deg);background:&quot;</span>+d[e].color+<span class="string">&quot;;z-index:99999&quot;</span>);requestAnimationFrame(r)&#125;<span class="function"><span class="keyword">function</span> <span class="title">o</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> t=<span class="string">&quot;function&quot;</span>==<span class="keyword">typeof</span> e.onclick&amp;&amp;e.onclick;e.onclick=<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;t&amp;&amp;t(),i(e)&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">i</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> a=t.createElement(<span class="string">&quot;div&quot;</span>);a.className=<span class="string">&quot;heart&quot;</span>,d.push(&#123;<span class="attr">el</span>:a,<span class="attr">x</span>:e.clientX-<span class="number">5</span>,<span class="attr">y</span>:e.clientY-<span class="number">5</span>,<span class="attr">scale</span>:<span class="number">1</span>,<span class="attr">alpha</span>:<span class="number">1</span>,<span class="attr">color</span>:s()&#125;),t.body.appendChild(a)&#125;<span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> a=t.createElement(<span class="string">&quot;style&quot;</span>);a.type=<span class="string">&quot;text/css&quot;</span>;<span class="keyword">try</span>&#123;a.appendChild(t.createTextNode(e))&#125;<span class="keyword">catch</span>(t)&#123;a.styleSheet.cssText=e&#125;t.getElementsByTagName(<span class="string">&quot;head&quot;</span>)[<span class="number">0</span>].appendChild(a)&#125;<span class="function"><span class="keyword">function</span> <span class="title">s</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span><span class="string">&quot;rgb(&quot;</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">&quot;,&quot;</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">&quot;,&quot;</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">&quot;)&quot;</span>&#125;<span class="keyword">var</span> d=[];e.requestAnimationFrame=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="built_in">setTimeout</span>(e,<span class="number">1e3</span>/<span class="number">60</span>)&#125;&#125;(),n()&#125;(<span class="built_in">window</span>,<span class="built_in">document</span>);</span><br></pre></td></tr></table></figure>
  在<code>\themes\next\layout\_layout.swig</code>文件末尾添加：  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 页面点击小红心 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/js/src/clicklove.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>爆炸红心特效（比较花里胡哨不推荐）<br>在<code>themes/next/source/js/src</code>里面建一个<code>fireworks.js</code>的文件，接着把下面的代码拷贝粘贴到<code>fireworks.js</code>文件中：  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;<span class="function"><span class="keyword">function</span> <span class="title">updateCoords</span>(<span class="params">e</span>)</span>&#123;pointerX=(e.clientX||e.touches[<span class="number">0</span>].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[<span class="number">0</span>].clientY-canvasEl.getBoundingClientRect().top&#125;<span class="function"><span class="keyword">function</span> <span class="title">setParticuleDirection</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> t=anime.random(<span class="number">0</span>,<span class="number">360</span>)*<span class="built_in">Math</span>.PI/<span class="number">180</span>,a=anime.random(<span class="number">50</span>,<span class="number">180</span>),n=[-<span class="number">1</span>,<span class="number">1</span>][anime.random(<span class="number">0</span>,<span class="number">1</span>)]*a;<span class="keyword">return</span>&#123;<span class="attr">x</span>:e.x+n*<span class="built_in">Math</span>.cos(t),<span class="attr">y</span>:e.y+n*<span class="built_in">Math</span>.sin(t)&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">createParticule</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a=&#123;&#125;;<span class="keyword">return</span> a.x=e,a.y=t,a.color=colors[anime.random(<span class="number">0</span>,colors.length-<span class="number">1</span>)],a.radius=anime.random(<span class="number">16</span>,<span class="number">32</span>),a.endPos=setParticuleDirection(a),a.draw=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI,!<span class="number">0</span>),ctx.fillStyle=a.color,ctx.fill()&#125;,a&#125;<span class="function"><span class="keyword">function</span> <span class="title">createCircle</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a=&#123;&#125;;<span class="keyword">return</span> a.x=e,a.y=t,a.color=<span class="string">&quot;#F00&quot;</span>,a.radius=<span class="number">0.1</span>,a.alpha=<span class="number">0.5</span>,a.lineWidth=<span class="number">6</span>,a.draw=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI,!<span class="number">0</span>),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=<span class="number">1</span>&#125;,a&#125;<span class="function"><span class="keyword">function</span> <span class="title">renderParticule</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> t=<span class="number">0</span>;t&lt;e.animatables.length;t++)&#123;e.animatables[t].target.draw()&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">animateParticules</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> a=createCircle(e,t),n=[],i=<span class="number">0</span>;i&lt;numberOfParticules;i++)&#123;n.push(createParticule(e,t))&#125;anime.timeline().add(&#123;<span class="attr">targets</span>:n,<span class="attr">x</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">return</span> e.endPos.x&#125;,<span class="attr">y</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">return</span> e.endPos.y&#125;,<span class="attr">radius</span>:<span class="number">0.1</span>,<span class="attr">duration</span>:anime.random(<span class="number">1200</span>,<span class="number">1800</span>),<span class="attr">easing</span>:<span class="string">&quot;easeOutExpo&quot;</span>,<span class="attr">update</span>:renderParticule&#125;).add(&#123;<span class="attr">targets</span>:a,<span class="attr">radius</span>:anime.random(<span class="number">80</span>,<span class="number">160</span>),<span class="attr">lineWidth</span>:<span class="number">0</span>,<span class="attr">alpha</span>:&#123;<span class="attr">value</span>:<span class="number">0</span>,<span class="attr">easing</span>:<span class="string">&quot;linear&quot;</span>,<span class="attr">duration</span>:anime.random(<span class="number">600</span>,<span class="number">800</span>)&#125;,<span class="attr">duration</span>:anime.random(<span class="number">1200</span>,<span class="number">1800</span>),<span class="attr">easing</span>:<span class="string">&quot;easeOutExpo&quot;</span>,<span class="attr">update</span>:renderParticule,<span class="attr">offset</span>:<span class="number">0</span>&#125;)&#125;<span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a;<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> n=<span class="built_in">this</span>,i=<span class="built_in">arguments</span>;<span class="built_in">clearTimeout</span>(a),a=<span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;e.apply(n,i)&#125;,t)&#125;&#125;<span class="keyword">var</span> canvasEl=<span class="built_in">document</span>.querySelector(<span class="string">&quot;.fireworks&quot;</span>);<span class="keyword">if</span>(canvasEl)&#123;<span class="keyword">var</span> ctx=canvasEl.getContext(<span class="string">&quot;2d&quot;</span>),numberOfParticules=<span class="number">30</span>,pointerX=<span class="number">0</span>,pointerY=<span class="number">0</span>,tap=<span class="string">&quot;mousedown&quot;</span>,colors=[<span class="string">&quot;#FF1461&quot;</span>,<span class="string">&quot;#18FF92&quot;</span>,<span class="string">&quot;#5A87FF&quot;</span>,<span class="string">&quot;#FBF38C&quot;</span>],setCanvasSize=debounce(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;canvasEl.width=<span class="number">2</span>*<span class="built_in">window</span>.innerWidth,canvasEl.height=<span class="number">2</span>*<span class="built_in">window</span>.innerHeight,canvasEl.style.width=<span class="built_in">window</span>.innerWidth+<span class="string">&quot;px&quot;</span>,canvasEl.style.height=<span class="built_in">window</span>.innerHeight+<span class="string">&quot;px&quot;</span>,canvasEl.getContext(<span class="string">&quot;2d&quot;</span>).scale(<span class="number">2</span>,<span class="number">2</span>)&#125;,<span class="number">500</span>),render=anime(&#123;<span class="attr">duration</span>:<span class="number">1</span>/<span class="number">0</span>,<span class="attr">update</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>,canvasEl.width,canvasEl.height)&#125;&#125;);<span class="built_in">document</span>.addEventListener(tap,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="string">&quot;sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;toggle-sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;A&quot;</span>!==e.target.nodeName&amp;&amp;<span class="string">&quot;IMG&quot;</span>!==e.target.nodeName&amp;&amp;(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))&#125;,!<span class="number">1</span>),setCanvasSize(),<span class="built_in">window</span>.addEventListener(<span class="string">&quot;resize&quot;</span>,setCanvasSize,!<span class="number">1</span>)&#125;<span class="string">&quot;use strict&quot;</span>;<span class="function"><span class="keyword">function</span> <span class="title">updateCoords</span>(<span class="params">e</span>)</span>&#123;pointerX=(e.clientX||e.touches[<span class="number">0</span>].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[<span class="number">0</span>].clientY-canvasEl.getBoundingClientRect().top&#125;<span class="function"><span class="keyword">function</span> <span class="title">setParticuleDirection</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> t=anime.random(<span class="number">0</span>,<span class="number">360</span>)*<span class="built_in">Math</span>.PI/<span class="number">180</span>,a=anime.random(<span class="number">50</span>,<span class="number">180</span>),n=[-<span class="number">1</span>,<span class="number">1</span>][anime.random(<span class="number">0</span>,<span class="number">1</span>)]*a;<span class="keyword">return</span>&#123;<span class="attr">x</span>:e.x+n*<span class="built_in">Math</span>.cos(t),<span class="attr">y</span>:e.y+n*<span class="built_in">Math</span>.sin(t)&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">createParticule</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a=&#123;&#125;;<span class="keyword">return</span> a.x=e,a.y=t,a.color=colors[anime.random(<span class="number">0</span>,colors.length-<span class="number">1</span>)],a.radius=anime.random(<span class="number">16</span>,<span class="number">32</span>),a.endPos=setParticuleDirection(a),a.draw=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI,!<span class="number">0</span>),ctx.fillStyle=a.color,ctx.fill()&#125;,a&#125;<span class="function"><span class="keyword">function</span> <span class="title">createCircle</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a=&#123;&#125;;<span class="keyword">return</span> a.x=e,a.y=t,a.color=<span class="string">&quot;#F00&quot;</span>,a.radius=<span class="number">0.1</span>,a.alpha=<span class="number">0.5</span>,a.lineWidth=<span class="number">6</span>,a.draw=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI,!<span class="number">0</span>),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=<span class="number">1</span>&#125;,a&#125;<span class="function"><span class="keyword">function</span> <span class="title">renderParticule</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> t=<span class="number">0</span>;t&lt;e.animatables.length;t++)&#123;e.animatables[t].target.draw()&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">animateParticules</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> a=createCircle(e,t),n=[],i=<span class="number">0</span>;i&lt;numberOfParticules;i++)&#123;n.push(createParticule(e,t))&#125;anime.timeline().add(&#123;<span class="attr">targets</span>:n,<span class="attr">x</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">return</span> e.endPos.x&#125;,<span class="attr">y</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">return</span> e.endPos.y&#125;,<span class="attr">radius</span>:<span class="number">0.1</span>,<span class="attr">duration</span>:anime.random(<span class="number">1200</span>,<span class="number">1800</span>),<span class="attr">easing</span>:<span class="string">&quot;easeOutExpo&quot;</span>,<span class="attr">update</span>:renderParticule&#125;).add(&#123;<span class="attr">targets</span>:a,<span class="attr">radius</span>:anime.random(<span class="number">80</span>,<span class="number">160</span>),<span class="attr">lineWidth</span>:<span class="number">0</span>,<span class="attr">alpha</span>:&#123;<span class="attr">value</span>:<span class="number">0</span>,<span class="attr">easing</span>:<span class="string">&quot;linear&quot;</span>,<span class="attr">duration</span>:anime.random(<span class="number">600</span>,<span class="number">800</span>)&#125;,<span class="attr">duration</span>:anime.random(<span class="number">1200</span>,<span class="number">1800</span>),<span class="attr">easing</span>:<span class="string">&quot;easeOutExpo&quot;</span>,<span class="attr">update</span>:renderParticule,<span class="attr">offset</span>:<span class="number">0</span>&#125;)&#125;<span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a;<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> n=<span class="built_in">this</span>,i=<span class="built_in">arguments</span>;<span class="built_in">clearTimeout</span>(a),a=<span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;e.apply(n,i)&#125;,t)&#125;&#125;<span class="keyword">var</span> canvasEl=<span class="built_in">document</span>.querySelector(<span class="string">&quot;.fireworks&quot;</span>);<span class="keyword">if</span>(canvasEl)&#123;<span class="keyword">var</span> ctx=canvasEl.getContext(<span class="string">&quot;2d&quot;</span>),numberOfParticules=<span class="number">30</span>,pointerX=<span class="number">0</span>,pointerY=<span class="number">0</span>,tap=<span class="string">&quot;mousedown&quot;</span>,colors=[<span class="string">&quot;#FF1461&quot;</span>,<span class="string">&quot;#18FF92&quot;</span>,<span class="string">&quot;#5A87FF&quot;</span>,<span class="string">&quot;#FBF38C&quot;</span>],setCanvasSize=debounce(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;canvasEl.width=<span class="number">2</span>*<span class="built_in">window</span>.innerWidth,canvasEl.height=<span class="number">2</span>*<span class="built_in">window</span>.innerHeight,canvasEl.style.width=<span class="built_in">window</span>.innerWidth+<span class="string">&quot;px&quot;</span>,canvasEl.style.height=<span class="built_in">window</span>.innerHeight+<span class="string">&quot;px&quot;</span>,canvasEl.getContext(<span class="string">&quot;2d&quot;</span>).scale(<span class="number">2</span>,<span class="number">2</span>)&#125;,<span class="number">500</span>),render=anime(&#123;<span class="attr">duration</span>:<span class="number">1</span>/<span class="number">0</span>,<span class="attr">update</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>,canvasEl.width,canvasEl.height)&#125;&#125;);<span class="built_in">document</span>.addEventListener(tap,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="string">&quot;sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;toggle-sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;A&quot;</span>!==e.target.nodeName&amp;&amp;<span class="string">&quot;IMG&quot;</span>!==e.target.nodeName&amp;&amp;(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))&#125;,!<span class="number">1</span>),setCanvasSize(),<span class="built_in">window</span>.addEventListener(<span class="string">&quot;resize&quot;</span>,setCanvasSize,!<span class="number">1</span>)&#125;;</span><br></pre></td></tr></table></figure>
  打开<code>themes/next/layout/_layout.swig</code>,在<code>&lt;/body&gt;</code>上面写下如下代码：（注意和上面的对其）  <figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="name">if</span></span> theme.fireworks %&#125;</span></span><br><span class="line"><span class="xml">   <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">class</span>=<span class="string">&quot;fireworks&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span> </span></span><br><span class="line"><span class="xml">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;//cdn.bootcss.com/animejs/2.2.0/anime.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span></span><br><span class="line"><span class="xml">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/js/src/fireworks.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="name">endif</span></span> %&#125;</span></span><br></pre></td></tr></table></figure>
  打开主题配置文件，在文件末尾添加：（<code>themes/next/</code>下的<code>_config.yml</code>）  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Fireworks</span></span><br><span class="line"><span class="attr">fireworks:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="背景动画（只能选一个）"><a href="#背景动画（只能选一个）" class="headerlink" title="背景动画（只能选一个）"></a>背景动画（只能选一个）</h2><p>Canvas-nest风格、JavaScript 3D library风格 动画只能选一个</p>
<ul>
<li>Canvas-nest风格<br>  进入theme/next目录，执行以下命令  <figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/theme-next/</span>theme-<span class="keyword">next</span>-canvas-nest source<span class="regexp">/lib/</span>canvas-nest</span><br></pre></td></tr></table></figure>
  打开<code>themes/next/</code>下的<code>_config.yml</code>文件，搜索<code>Canvas-nest</code>，将canvas_nest的中enable值改为true即可  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Canvas-nest</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/theme-next-canvas-nest</span></span><br><span class="line"><span class="attr">canvas_nest:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">onmobile:</span> <span class="literal">true</span> <span class="comment"># display on mobile or not</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">&quot;0,0,255&quot;</span> <span class="comment"># RGB values, use &#x27;,&#x27; to separate</span></span><br><span class="line">  <span class="attr">opacity:</span> <span class="number">0.5</span> <span class="comment"># the opacity of line: 0~1</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span> <span class="comment"># z-index property of the background</span></span><br><span class="line">  <span class="attr">count:</span> <span class="number">99</span> <span class="comment"># the number of lines</span></span><br></pre></td></tr></table></figure></li>
<li>JavaScript 3D library风格<br>  进入theme/next目录，执行以下命令  <figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/theme-next/</span>theme-<span class="keyword">next</span>-three source<span class="regexp">/lib/</span>three</span><br></pre></td></tr></table></figure>
  打开<code>themes/next/</code>下的<code>_config.yml</code>文件，搜索<code>theme-next-three</code>，将想要的效果改为true即可：  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># three_waves</span></span><br><span class="line"><span class="attr">three_waves:</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># canvas_lines</span></span><br><span class="line"><span class="attr">canvas_lines:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># canvas_sphere</span></span><br><span class="line"><span class="attr">canvas_sphere:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="设置侧栏在左侧-右侧"><a href="#设置侧栏在左侧-右侧" class="headerlink" title="设置侧栏在左侧/右侧"></a>设置侧栏在左侧/右侧</h2><p>打开themes/next/下的_config.yml，查找<code>sidebar</code></p>
<ul>
<li>Pisces或Gemini方案<br>  打开themes/next/下的_config.yml，查找<code>sidebar</code>，将想要的方案打开  <figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">sidebar:</span></span><br><span class="line"><span class="symbol">position:</span> left</span><br><span class="line"><span class="meta">#position: right</span></span><br></pre></td></tr></table></figure></li>
<li>Mist或Muse方案<br>  打开next/source/js/src/motion.js，查找paddingRight，把所有（2个）PaddingRight更改为paddingLeft即可。<br>  打开next/source/css/_custom/custom.styl，添加如下内容：  <figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//侧边栏置于左侧</span></span><br><span class="line"><span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//侧栏开关置于左侧</span></span><br><span class="line"><span class="selector-class">.sidebar-toggle</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="variable">$b2t-position-right</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  打开next/source/css/_common/components/back-to-top.styl，将right: $b2t-position-right;改为left: $b2t-position-right;</li>
</ul>
<h2 id="显示侧边栏的时机"><a href="#显示侧边栏的时机" class="headerlink" title="显示侧边栏的时机"></a>显示侧边栏的时机</h2><p>打开themes/next/下的_config.yml，查找<code>sidebar</code></p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Sidebar Display, available <span class="built_in">values</span> (<span class="keyword">only</span> <span class="keyword">for</span> Muse | Mist):</span><br><span class="line">#  - post    <span class="built_in">expand</span> <span class="keyword">on</span> posts automatically. Default.</span><br><span class="line">#  - always  <span class="built_in">expand</span> <span class="keyword">for</span> <span class="keyword">all</span> pages automatically.</span><br><span class="line">#  - <span class="keyword">hide</span>    <span class="built_in">expand</span> <span class="keyword">only</span> when click <span class="keyword">on</span> the sidebar toggle icon.</span><br><span class="line">#  - <span class="built_in">remove</span>  totally <span class="built_in">remove</span> sidebar including sidebar toggle.</span><br><span class="line"><span class="keyword">display</span>: post</span><br></pre></td></tr></table></figure>

<h2 id="文章末尾添加版权声明"><a href="#文章末尾添加版权声明" class="headerlink" title="文章末尾添加版权声明"></a>文章末尾添加版权声明</h2><p>打开themes/next/下的_config.yml，查找<code>creative_commons</code></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">creative_commons:</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">by-nc-sa</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">true</span>  <span class="comment"># 将false改为true即可显示版权信息</span></span><br><span class="line">  <span class="attr">language:</span></span><br></pre></td></tr></table></figure>

<h2 id="添加本地搜索功能"><a href="#添加本地搜索功能" class="headerlink" title="添加本地搜索功能"></a>添加本地搜索功能</h2><p>参考文章<a href="https://vic.kim/2019/05/22/Hexo%20Next%20%E4%B8%BB%E9%A2%98%E4%B8%AD%E6%B7%BB%E5%8A%A0%E6%9C%AC%E5%9C%B0%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD/">Hexo Next 主题中添加本地搜索功能</a></p>
<h2 id="建立标签云及效果展示"><a href="#建立标签云及效果展示" class="headerlink" title="建立标签云及效果展示"></a>建立标签云及效果展示</h2><p>参考文章<a href="https://vic.kim/2019/05/23/Hexo%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%8B%E6%A0%87%E7%AD%BE%E4%BA%91%E5%8F%8A%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA/">Hexo博客建立标签云及效果展示</a></p>
<h2 id="文章添加阴影、透明效果"><a href="#文章添加阴影、透明效果" class="headerlink" title="文章添加阴影、透明效果"></a>文章添加阴影、透明效果</h2><p>打开theme/next/source/css/_custom/custom.styl，添加以下代码</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 主页文章添加阴影效果</span><br><span class="line"><span class="selector-class">.post</span> &#123;</span><br><span class="line">   <span class="attribute">margin-top</span>: <span class="number">60px</span>;</span><br><span class="line">   <span class="attribute">margin-bottom</span>: <span class="number">60px</span>;</span><br><span class="line">   <span class="attribute">padding</span>: <span class="number">25px</span>;</span><br><span class="line">   <span class="attribute">background</span>:<span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0.9</span>) none repeat scroll <span class="meta">!important</span>;</span><br><span class="line">   -webkit-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">202</span>, <span class="number">203</span>, <span class="number">203</span>, .<span class="number">5</span>);</span><br><span class="line">   -moz-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">202</span>, <span class="number">203</span>, <span class="number">204</span>, .<span class="number">5</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="设置代码块样式"><a href="#设置代码块样式" class="headerlink" title="设置代码块样式"></a>设置代码块样式</h2><p>在博客配置文件中，搜索<code>highlight:</code></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight:</span></span><br><span class="line">      <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#是否开启代码高亮</span></span><br><span class="line">      <span class="attr">line_number:</span> <span class="literal">false</span> <span class="comment">#是否增加代码行号</span></span><br><span class="line">      <span class="attr">auto_detect:</span> <span class="literal">true</span> <span class="comment">#自动判断代码语言</span></span><br><span class="line">      <span class="attr">tab_replace:</span></span><br></pre></td></tr></table></figure>
<p>代码块背景。打开themes/next/下的_config.yml，查找<code>highlight_theme</code></p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># Code Highlight theme</span></span><br><span class="line"><span class="meta"># Available values: normal | night | night eighties | night blue | night bright</span></span><br><span class="line"><span class="meta"># https://github.com/chriskempson/tomorrow-theme</span></span><br><span class="line">highlight_theme: night eighties</span><br></pre></td></tr></table></figure>

<h2 id="代码块复制功能"><a href="#代码块复制功能" class="headerlink" title="代码块复制功能"></a>代码块复制功能</h2><p>参考文章<a href="https://vic.kim/2019/05/26/Hexo%20NexT%20%E4%BB%A3%E7%A0%81%E5%9D%97%E5%A4%8D%E5%88%B6%E5%8A%9F%E8%83%BD/#more">Hexo NexT 代码块复制功能</a></p>
<h2 id="显示当前浏览进度"><a href="#显示当前浏览进度" class="headerlink" title="显示当前浏览进度"></a>显示当前浏览进度</h2><p>打开themes/next/下的_config.yml，查找<code>back2top</code></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">back2top:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Back to top in sidebar.</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Scroll percent label in b2t button.</span></span><br><span class="line">  <span class="attr">scrollpercent:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h2 id="在右上角或者左上角实现fork-me-on-github"><a href="#在右上角或者左上角实现fork-me-on-github" class="headerlink" title="在右上角或者左上角实现fork me on github"></a>在右上角或者左上角实现fork me on github</h2><ul>
<li>选择样式GitHub Ribbons,</li>
<li>修改图片跳转链接,将<a target="_blank" rel="noopener" href="https://github.com/you">中的链接换为自己Github链接：</li>
<li>打开 themes/next/layout/_layout.swig 文件，把代码复制到<div class="headband"></div>下面。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://vic.kim/2019/05/25/Mac%E4%B8%8B%E4%BD%BF%E7%94%A8Hexo-Github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/smile.jpg">
      <meta itemprop="name" content="Vic">
      <meta itemprop="description" content="人生苦短，我学Python">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Vicの博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/05/25/Mac%E4%B8%8B%E4%BD%BF%E7%94%A8Hexo-Github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" class="post-title-link" itemprop="url">Mac下使用Hexo+Github搭建个人博客</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2019-05-25 10:26:04 / 修改时间：13:09:30" itemprop="dateCreated datePublished" datetime="2019-05-25T10:26:04+08:00">2019-05-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Hexo-Next/" itemprop="url" rel="index"><span itemprop="name">Hexo Next</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Hexo是一个快速、简洁且高效的博客框架，最近有搭建个人博客的想法，便动手尝试了。<br>官方的<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/">文档</a></p>
<h1 id="hexo博客系统搭建"><a href="#hexo博客系统搭建" class="headerlink" title="hexo博客系统搭建"></a>hexo博客系统搭建</h1><h2 id="Github账号注册及仓库创建"><a href="#Github账号注册及仓库创建" class="headerlink" title="Github账号注册及仓库创建"></a>Github账号注册及仓库创建</h2><ul>
<li>进入<a target="_blank" rel="noopener" href="https://github.com/">Github</a>官网，注册账号</li>
<li>注册成功点击new仓库<br>  <img src="/2019/05/25/Mac%E4%B8%8B%E4%BD%BF%E7%94%A8Hexo-Github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/15587527012655.jpg" alt="-w1309"></li>
<li>创建仓库的名字必须为username.github.io，我的用户名为Vicxiaoyezi，因此我创建的仓库就是Vicxiaoyezi.github.io，这是很关键的一点，很重要。输入名字后，直接点最下面绿色的按钮“Create repository”，创建新仓库。这一部分基本完成了，接下去需要在终端操作。<br>  <img src="/2019/05/25/Mac%E4%B8%8B%E4%BD%BF%E7%94%A8Hexo-Github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/15587526607215.jpg" alt="-w746"></li>
</ul>
<h2 id="安装Node-js"><a href="#安装Node-js" class="headerlink" title="安装Node.js"></a>安装Node.js</h2><ul>
<li>首先检查是否安装了node.js  <figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">node</span> <span class="title">-v</span> <span class="comment"># 是否出现安装版本信息，出现说明已经安装了</span></span><br></pre></td></tr></table></figure></li>
<li>如果未安装，去<a target="_blank" rel="noopener" href="https://nodejs.org/en/">Node.js</a>官网下载相应的安装包，一路安装即可。  <figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装完成之后打开终端，分别输入一下命令，如果出现版本信息，就说明安装成功。</span></span><br><span class="line"><span class="keyword">node</span><span class="title">-v</span>   </span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h2><p>Mac下安装Xcode就自带Git。</p>
<ul>
<li><p>首先检查是否安装了Git</p>
  <figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git --<span class="keyword">version</span> <span class="comment"># 是否出现安装版本信息，出现说明已经安装了</span></span><br></pre></td></tr></table></figure></li>
<li><p>未安装通过Homebrew安装git（<a href="https://vic.kim/2019/05/20/Homebrew/">Homebrew的安装参考</a>），终端命令输入</p>
  <figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">brew </span><span class="keyword">install </span>git</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="配置SSH-Key"><a href="#配置SSH-Key" class="headerlink" title="配置SSH Key"></a>配置SSH Key</h2><p>这一步不是必须的，配置SSH Key的话之后每次更新博客就不用都输入用户名和密码，可以方便一些。<br>配置参考<a href="https://vic.kim/2019/05/21/Mac%E7%94%B5%E8%84%91%E7%94%A8%E7%BB%88%E7%AB%AF%E7%94%9F%E6%88%90SSH%20key%20%E8%AE%BF%E9%97%AE%E8%87%AA%E5%B7%B1%E7%9A%84Github/">Mac下配置SSH key</a></p>
<h2 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h2><ul>
<li>安装hexo<br>  如果您的电脑中已经安装上述必备程序，那么恭喜您！接下来只需要使用 npm 即可完成 Hexo 的安装。  <figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-<span class="keyword">cli</span></span><br></pre></td></tr></table></figure></li>
<li>创建博客目录<br>  在任意位置创建一个文件夹，如MyBlog，cd到该路径下  <figure class="highlight pf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在你选择的目录下创建一个MyBlog文件夹</span></span><br><span class="line">mkdir MyB<span class="keyword">log</span></span><br><span class="line"><span class="comment"># 进入目录</span></span><br><span class="line">cd MyB<span class="keyword">log</span></span><br></pre></td></tr></table></figure></li>
<li>初始化目录，在MyBlog目录下  <figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo <span class="keyword">init</span></span><br></pre></td></tr></table></figure></li>
<li>启动本地服务  <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hexo</span> s <span class="comment"># 也可是 hexo server</span></span><br></pre></td></tr></table></figure>
  如果出现以下信息说明成功，浏览器输入<a target="_blank" rel="noopener" href="http://localhost:4000/">http://localhost:4000/ </a>就可以访问了。<br>  当然这个博客是本地的，别人是无法访问的，之后我们需要部署到GitHub上。<br>  ``  <figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INFO</span>  <span class="keyword">Start</span> processing</span><br><span class="line"><span class="keyword">INFO</span>  Hexo <span class="keyword">is</span> running at http://localhost:<span class="number">4000</span> . Press Ctrl+C <span class="keyword">to</span> stop.</span><br></pre></td></tr></table></figure>
  <img src="/2019/05/25/Mac%E4%B8%8B%E4%BD%BF%E7%94%A8Hexo-Github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/15587552575382.jpg" alt="到这里说明你的环境以及没有问题了，成功了搭建起了博客框架"></li>
</ul>
<h1 id="博客关联到Github仓库"><a href="#博客关联到Github仓库" class="headerlink" title="博客关联到Github仓库"></a>博客关联到Github仓库</h1><p>博客文件夹<code>MyBlog</code>中的<code>_config.yml</code>文件，这是博客的主要配置文件。</p>
<ul>
<li>编辑博客配置文件<code>_config.yml</code>中的<code>deploy</code>节点。记得将username（Vicxiaoyezi）换成自己的username  <figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">deploy:</span></span><br><span class="line"><span class="symbol">  type:</span> git</span><br><span class="line"><span class="symbol">  repo:</span> git@github.com:Vicxiaoyezi/Vicxiaoyezi.github.io.git</span><br><span class="line"><span class="symbol">  branch:</span> master</span><br></pre></td></tr></table></figure>
  注意：repo为这种形式的是配置了SSH Key之后的，如果没有配置则使用Https形式的地址。</li>
<li>为了能够使Hexo部署到GitHub上，需要安装一个插件，在博客目录下运行以下命令  <figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git <span class="comment">--save</span></span><br></pre></td></tr></table></figure></li>
<li>然后在博客目录中执行  <figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#清除缓存</span></span><br><span class="line">hexo clean</span><br><span class="line"><span class="meta"># 产生静态网页</span></span><br><span class="line">hexo g</span><br><span class="line"><span class="meta"># 部署到GitHub page上</span></span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>
  在浏览器输入<code>username.github.io</code>就可以访问你的博客了(例如：<code>Vicxiaoyezi.github.io</code>)。</li>
</ul>
<h1 id="博客的基本使用"><a href="#博客的基本使用" class="headerlink" title="博客的基本使用"></a>博客的基本使用</h1><ul>
<li>创建新文章，博客目录下执行以下命令  <figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> <span class="string">&#x27;文章标题&#x27;</span></span><br><span class="line"><span class="meta">#例如：hexo new Mac下使用Hexo-Github搭建个人博客</span></span><br></pre></td></tr></table></figure>
  这样会在本地博客的source-&gt;_posts路径下看到新建的文章，是md格式的，找一个markdown文本编辑器进行编辑即可。</li>
<li>编辑完成之后本地地址预览，在博客目录下运行以下命令  <figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean <span class="variable">&amp;&amp;</span> hexo g <span class="variable">&amp;&amp;</span> hexo s</span><br></pre></td></tr></table></figure></li>
<li>编辑完成之后上传Github，在博客目录下运行以下命令  <figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean <span class="variable">&amp;&amp;</span> hexo g <span class="variable">&amp;&amp;</span> hexo d</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="Hexo博客美化及功能增添"><a href="#Hexo博客美化及功能增添" class="headerlink" title="Hexo博客美化及功能增添"></a>Hexo博客美化及功能增添</h1><p><a target="_blank" rel="noopener" href="https://hexo.io/themes/">Hexo官网主题</a><br>Hexo主题在Github上有很多，如</p>
<p><a target="_blank" rel="noopener" href="https://github.com/theme-next/hexo-theme-next">https://github.com/theme-next/hexo-theme-next</a><br><a target="_blank" rel="noopener" href="https://github.com/litten/hexo-theme-yilia">https://github.com/litten/hexo-theme-yilia</a><br><a target="_blank" rel="noopener" href="https://github.com/viosey/hexo-theme-material">https://github.com/viosey/hexo-theme-material</a><br><a target="_blank" rel="noopener" href="https://github.com/LouisBarranqueiro/hexo-theme-tranquilpeak">https://github.com/LouisBarranqueiro/hexo-theme-tranquilpeak</a><br><a target="_blank" rel="noopener" href="https://github.com/pinggod/hexo-theme-apollo">https://github.com/pinggod/hexo-theme-apollo</a><br><a target="_blank" rel="noopener" href="https://github.com/ppoffice/hexo-theme-icarus">https://github.com/ppoffice/hexo-theme-icarus</a></p>
<p>挑选自己喜欢的一款。当然自己能够DIY，但是路很长慢慢来。</p>
<h1 id="绑定个人域名"><a href="#绑定个人域名" class="headerlink" title="绑定个人域名"></a>绑定个人域名</h1><p>如果你想拥有一个炫酷的域名，那就往下看吧</p>
<h2 id="购买域名"><a href="#购买域名" class="headerlink" title="购买域名"></a>购买域名</h2><p>可以去<a target="_blank" rel="noopener" href="https://wanwang.aliyun.com/">万网</a>买，也可以去其它地方。具体购买过程就不多讲了。</p>
<h2 id="配置DNS地址"><a href="#配置DNS地址" class="headerlink" title="配置DNS地址"></a>配置DNS地址</h2><p>进入万网-控制台-域名-具体域名管理-DNS修改<br>修改DNS为DNSPod的免费DNS地址：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f1g1ns1<span class="selector-class">.dnspod</span><span class="selector-class">.net</span> </span><br><span class="line">f1g1ns2<span class="selector-class">.dnspod</span>.net</span><br></pre></td></tr></table></figure>
<p><img src="/2019/05/25/Mac%E4%B8%8B%E4%BD%BF%E7%94%A8Hexo-Github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/15587591564790.jpg" alt="-w887"></p>
<h2 id="获取自己-github-的二级域名的-IP地址"><a href="#获取自己-github-的二级域名的-IP地址" class="headerlink" title="获取自己 github 的二级域名的 IP地址"></a>获取自己 github 的二级域名的 IP地址</h2><p>直接在终端输入以下命令(username换成自己的)</p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ping username.github.io</span><br><span class="line"><span class="meta">#例如：ping Vicxiaoyezi.github.io </span></span><br><span class="line">```   </span><br><span class="line"><span class="meta">## 域名解析</span></span><br><span class="line">注册一个[DNSPod](https:<span class="comment">//www.dnspod.cn/)账号，登录之后把我们新注册的域名加进去，在域名解析界面添加3条记录</span></span><br><span class="line">   </span><br></pre></td></tr></table></figure>
<p>@          A             192.30.252.153<br>@          A             vic.kim.</p>
<p>```<br>如图所示。<br><img src="/2019/05/25/Mac%E4%B8%8B%E4%BD%BF%E7%94%A8Hexo-Github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/15587594887957.jpg" alt="-w782"></p>
<h2 id="设置CNAME"><a href="#设置CNAME" class="headerlink" title="设置CNAME"></a>设置CNAME</h2><p>在 hexo 项目下，source 文件夹下面创建 CNAME 文件（没有后缀名的），在里面写上购买的域名。比如：<br><img src="/2019/05/25/Mac%E4%B8%8B%E4%BD%BF%E7%94%A8Hexo-Github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/15587599409015.jpg" alt="-w375"></p>
<p>在github上面，打开<code>username.github.io</code>项目的（Settings）设置，然后在 GitHub Pages的 Custom domain设置里填上购买的域名。比如：<br><img src="/2019/05/25/Mac%E4%B8%8B%E4%BD%BF%E7%94%A8Hexo-Github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/15587601040293.jpg" alt="-w770"></p>
<p>到这里就绑定域名成功了。</p>
<p>最后晒上我的博客地址：<a href="https://vic.kim/">vic.kim</a><br>祝大家也早日拥有自己的博客~</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://vic.kim/2019/05/23/10%E5%88%86%E9%92%9F%E7%9C%8B%E6%87%82Docker%E5%92%8CK8S/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/smile.jpg">
      <meta itemprop="name" content="Vic">
      <meta itemprop="description" content="人生苦短，我学Python">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Vicの博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/05/23/10%E5%88%86%E9%92%9F%E7%9C%8B%E6%87%82Docker%E5%92%8CK8S/" class="post-title-link" itemprop="url">10分钟看懂Docker和K8S</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-05-23 15:59:51" itemprop="dateCreated datePublished" datetime="2019-05-23T15:59:51+08:00">2019-05-23</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2019-08-22 20:36:54" itemprop="dateModified" datetime="2019-08-22T20:36:54+08:00">2019-08-22</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Docker/" itemprop="url" rel="index"><span itemprop="name">Docker</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>2010年，几个搞IT的年轻人，在美国旧金山成立了一家名叫“dotCloud”的公司。这家公司主要提供基于PaaS的云计算技术服务。具体来说，是和LXC有关的容器技术。<br>LXC，就是Linux容器虚拟技术（Linux container）</p>
<p>后来，dotCloud公司将自己的容器技术进行了简化和标准化，并命名为——Docker。<br><img src="/2019/05/23/10%E5%88%86%E9%92%9F%E7%9C%8B%E6%87%82Docker%E5%92%8CK8S/149930-20190731223405786-383145862.jpg" alt="Docker"></p>
<p>Docker技术诞生之后，并没有引起行业的关注。而dotCloud公司，作为一家小型创业企业，在激烈的竞争之下，也步履维艰。正当他们快要坚持不下去的时候，脑子里蹦出了“开源”的想法。什么是“开源”？开源，就是开放源代码。也就是将原来内部保密的程序源代码开放给所有人，然后让大家一起参与进来，贡献代码和意见。</p>
<p>有的软件是一开始就开源的。也有的软件，是混不下去，创造者又不想放弃，所以选择开源。自己养不活，就吃“百家饭”嘛。2013年3月，dotCloud公司的创始人之一，Docker之父，28岁的Solomon Hykes正式决定，将Docker项目开源。</p>
<p>不开则已，一开惊人。越来越多的IT工程师发现了Docker的优点，然后蜂拥而至，加入Docker开源社区。Docker的人气迅速攀升，速度之快，令人瞠目结舌。开源当月，Docker 0.1 版本发布。此后的每一个月，Docker都会发布一个版本。到2014年6月9日，Docker 1.0 版本正式发布。此时的Docker，已经成为行业里人气最火爆的开源技术，没有之一。甚至像Google、微软、Amazon、VMware这样的巨头，都对它青睐有加，表示将全力支持。Docker火了之后，dotCloud公司干脆把公司名字也改成了Docker Inc. 。</p>
<p> Docker和容器技术为什么会这么火爆？说白了，就是因为它“轻”。在容器技术之前，业界的网红是虚拟机。虚拟机技术的代表，是VMWare和OpenStack。</p>
<p>相信很多人都用过虚拟机。虚拟机，就是在你的操作系统里面，装一个软件，然后通过这个软件，再模拟一台甚至多台“子电脑”出来。在“子电脑”里，你可以和正常电脑一样运行程序，例如开QQ。如果你愿意，你可以变出好几个“子电脑”，里面都开上QQ。“子电脑”和“子电脑”之间，是相互隔离的，互不影响。虚拟机属于虚拟化技术。</p>
<p>而Docker这样的容器技术，也是虚拟化技术，属于轻量级的虚拟化。虚拟机虽然可以隔离出很多“子电脑”，但占用空间更大，启动更慢，虚拟机软件可能还要花钱（例如VMWare）。而容器技术恰好没有这些缺点。它不需要虚拟出整个操作系统，只需要虚拟一个小规模的环境（类似“沙箱”）。</p>
<p>它启动时间很快，几秒钟就能完成。而且，它对资源的利用率很高（一台主机可以同时运行几千个Docker容器）。此外，它占的空间很小，虚拟机一般要几GB到几十GB的空间，而容器只需要MB级甚至KB级。正因为如此，容器技术受到了热烈的欢迎和追捧，发展迅速。<br><img src="/2019/05/23/10%E5%88%86%E9%92%9F%E7%9C%8B%E6%87%82Docker%E5%92%8CK8S/149930-20190731223738304-439883279.jpg" alt="容器和虚拟机的对比"></p>
<h1 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h1><p>我们具体来看看Docker。大家需要注意，Docker本身并不是容器，它是创建容器的工具，是应用容器<br>引擎。想要搞懂Docker，其实看它的两句口号就行。</p>
<p><strong>第一句，是“Build, Ship and Run”</strong>。<br>也就是，“搭建、发送、运行”，三板斧。</p>
<p>举个例子：我来到一片空地，想建个房子，于是我搬石头、砍木头、画图纸，一顿操作，终于把这个房子盖好了。</p>
<p>结果，我住了一段时间，想搬到另一片空地去。这时候，按以往的办法，我只能再次搬石头、砍木头、画图纸、盖房子。但是，跑来一个老巫婆，教会我一种魔法。这种魔法，可以把我盖好的房子复制一份，做成“镜像”，放在我的背包里。等我到了另一片空地，就用这个“镜像”，复制一套房子，摆在那<br>边，拎包入住。怎么样？是不是很神奇？</p>
<p><strong>Docker的第二句口号就是：“Build once，Run anywhere（搭建一次，到处能用）”</strong>。<br>Docker技术的三大核心概念，分别是：</p>
<ul>
<li>镜像（Image）</li>
<li>容器（Container）</li>
<li>仓库（Repository）<br>我刚才例子里面，那个放在包里的“镜像”，就是<strong>Docker镜像</strong>。而我的背包，就是<strong>Docker仓库</strong>。我在空地上，用魔法造好的房子，就是一个<strong>Docker容器</strong>。</li>
</ul>
<p>说白了，这个Docker镜像，是一个特殊的文件系统。它除了提供容器运行时所需的程序、库、资源、配置等文件外，还包含了一些为运行时准备的一些配置参数（例如环境变量）。镜像不包含任何动态数据，其内容在构建之后也不会被改变。也就是说，每次变出房子，房子是一样的，但生活用品之类的，都是不管的。谁住谁负责添置。</p>
<p>每一个镜像可以变出一种房子。那么，我可以有多个镜像呀！也就是说，我盖了一个欧式别墅，生成了镜像。另一个哥们可能盖了一个中国四合院，也生成了镜像。还有哥们，盖了一个非洲茅草屋，也生成了镜像。。。这么一来，我们可以交换镜像，你用我的，我用你的，岂不是很爽？</p>
<p>于是乎，就变成了一个大的公共仓库。负责对Docker镜像进行管理的，是<strong>Docker Registry服务</strong>（类似仓库管理员）。不是任何人建的任何镜像都是合法的。万一有人盖了一个有问题的房子呢？所以，Docker Registry服务对镜像的管理是非常严格的。最常使用的Registry公开服务，是官方的Docker Hub，这也是默认的 Registry，并拥有大量的高质量的官方镜像。</p>
<h1 id="K8S"><a href="#K8S" class="headerlink" title="K8S"></a>K8S</h1><p>好了，说完了Docker，我们再把目光转向K8S。</p>
<p>就在Docker容器技术被炒得热火朝天之时，大家发现，如果想要将Docker应用于具体的业务实现，是存在困难的——编排、管理和调度等各个方面，都不容易。于是，人们迫切需要一套管理系统，对Docker及容器进行更高级更灵活的管理。</p>
<p>就在这个时候，K8S出现了。</p>
<p>K8S，就是基于容器的集群管理平台，它的全称，是kubernetes。</p>
<p>Kubernetes 这个单词来自于希腊语，含义是舵手或领航员。K8S是它的缩写，用“8”字替代了了“ubernete”这8个字符。和Docker不同，K8S的创造者，是众人皆知的行业巨头——<strong>Google</strong>。然而，K8S并不是一件全新的发明。它的前身，是Google自己捣鼓了十多年的<strong>Borg系统</strong>。K8S是2014年6月由Google公司正式公布出来并宣布开源的。同年7月，微软、Red Hat、IBM、Docker、CoreOS、 Mesosphere和Saltstack 等公司，相继加入K8S。之后的一年内，VMware、HP、Intel等公司，也陆续加入。2015年7月，Google正式加入OpenStack基金会。与此同时，Kuberentes v1.0正式发布。目前，kubernetes的版本已经发展到V1.13。K8S的架构，略微有一点复杂，我们简单来看一下。</p>
<p>一个K8S系统，通常称为一个K8S集群（Cluster）。<br>这个集群主要包括两个部分：<br>    * 一个Master节点（主节点）<br>    * 一群Node节点（计算节点）<br><img src="/2019/05/23/10%E5%88%86%E9%92%9F%E7%9C%8B%E6%87%82Docker%E5%92%8CK8S/WechatIMG14.png"></p>
<p>一看就明白：Master节点主要还是负责管理和控制。Node节点是工作负载节点，里面是具体的容器。深入来看这两种节点。首先是Master节点。<br><img src="/2019/05/23/10%E5%88%86%E9%92%9F%E7%9C%8B%E6%87%82Docker%E5%92%8CK8S/WechatIMG15.png"></p>
<p>Master节点包括API Server、Scheduler、Controller manager、etcd。</p>
<ul>
<li>API Server是整个系统的对外接口，供客户端和其它组件调用，相当于“营业厅”。</li>
<li>Scheduler负责对集群内部的资源进行调度，相当于“调度室”。</li>
<li>Controller manager负责管理控制器，相当于“大总管”。<br>然后是Node节点。<br><img src="/2019/05/23/10%E5%88%86%E9%92%9F%E7%9C%8B%E6%87%82Docker%E5%92%8CK8S/WechatIMG16.png"></li>
</ul>
<p>Node节点包括Docker、kubelet、kube-proxy、Fluentd、kube-dns（可选），还有就是Pod。</p>
<p>Pod是Kubernetes最基本的操作单元。一个Pod代表着集群中运行的一个进程，它内部封装了一个或多个紧密相关的容器。除了Pod之外，K8S还有一个Service的概念，一个Service可以看作一组提供相同服务的Pod的对外访问接口。这段不太好理解，跳过吧。</p>
<p>Docker，不用说了，创建容器的。<br>Kubelet，主要负责监视指派到它所在Node上的Pod，包括创建、修改、监控、删除等。<br>Kube-proxy，主要负责为Pod对象提供代理。<br>Fluentd，主要负责日志收集、存储与查询。<br>是不是有点懵？唉，三言两语真的很难讲清楚，继续跳过吧。</p>
<p>Docker和K8S都介绍完了，然而文章并没有结束。</p>
<p><strong>接下来的部分，是写给核心网工程师甚至所有通信工程师看的</strong>。</p>
<p>从几十年前的1G，到现在的4G，再到将来的5G，移动通信发生了翻天覆地的变化，核心网亦是如此。</p>
<p>但是，如果你仔细洞察这些变化，会发现，所谓的核心网，其实本质上并没有发生改变，无非就是很多的服务器而已。不同的核心网网元，就是不同的服务器，不同的计算节点。</p>
<p>变化的，是这些“服务器”的形态和接口：形态，从机柜单板，变成机柜刀片，从机柜刀片，变成X86通用刀片服务器；接口，从中继线缆，变成网线，从网线，变成光纤。</p>
<p>就算变来变去，还是服务器，是计算节点，是CPU。</p>
<p>既然是服务器，那么就势必会和IT云计算一样，走上虚拟化的道路。毕竟，虚拟化有太多的优势，例如前文所说的低成本、高利用率、充分灵活、动态调度，等等。</p>
<p>前几年，大家以为虚拟机是核心网的终极形态。目前看来，更有可能是容器化。这几年经常说的NFV（网元功能虚拟化），也有可能改口为NFC（网元功能容器化）。</p>
<p>以VoLTE为例，如果按以前2G/3G的方式，那需要大量的专用设备，分别充当EPC和IMS的不同网元。而采用容器之后，很可能只需要一台服务器，创建十几个容器，用不同的容器，来分别运行不同网元的服务程序。这些容器，随时可以创建，也可以随时销毁。还能够在不停机的情况下，随意变大，随意变小，随意变强，随意变弱，在性能和功耗之间动态平衡。简直完美！</p>
<p>5G时代，核心网采用微服务架构，也是和容器完美搭配——单体式架构（Monolithic）变成微服务架构（Microservices），相当于一个全能型变成N个专能型。每个专能型，分配给一个隔离的容器，赋予了最大程度的灵活。<br><img src="/2019/05/23/10%E5%88%86%E9%92%9F%E7%9C%8B%E6%87%82Docker%E5%92%8CK8S/%E7%B2%BE%E7%BB%86%E5%8C%96%E5%88%86%E5%B7%A5.jpg" alt="精细化分工"></p>
<p>按照这样的发展趋势，在移动通信系统中，除了天线，剩下的部分都有可能虚拟化。核心网是第一个，但不是最后一个。虚拟化之后的核心网，与其说属于通信，实际上更应该归为IT。核心网的功能，只是容器中普通一个软件功能而已。</p>
<p>至于说在座的各位核心网工程师，恭喜你们，马上就要成功转型啦！<br><img src="/2019/05/23/10%E5%88%86%E9%92%9F%E7%9C%8B%E6%87%82Docker%E5%92%8CK8S/WechatIMG17.png"></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/f1f94c6968f5">https://www.jianshu.com/p/f1f94c6968f5</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://vic.kim/2019/05/23/%E4%BA%91%E5%82%A8%E5%AD%98%E9%80%89%E6%8B%A9%E5%81%9AHexo%E5%8D%9A%E5%AE%A2%E5%9B%BE%E5%BA%8A%EF%BC%88%E8%85%BE%E8%AE%AF%E4%BA%91%E3%80%81%E4%B8%83%E7%89%9B%E4%BA%91%E3%80%81%E7%BD%91%E6%98%93%E4%BA%91%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/smile.jpg">
      <meta itemprop="name" content="Vic">
      <meta itemprop="description" content="人生苦短，我学Python">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Vicの博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/05/23/%E4%BA%91%E5%82%A8%E5%AD%98%E9%80%89%E6%8B%A9%E5%81%9AHexo%E5%8D%9A%E5%AE%A2%E5%9B%BE%E5%BA%8A%EF%BC%88%E8%85%BE%E8%AE%AF%E4%BA%91%E3%80%81%E4%B8%83%E7%89%9B%E4%BA%91%E3%80%81%E7%BD%91%E6%98%93%E4%BA%91%EF%BC%89/" class="post-title-link" itemprop="url">云储存选择做Hexo博客图床（腾讯云、七牛云、网易云）</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2019-05-23 11:38:54 / 修改时间：11:41:53" itemprop="dateCreated datePublished" datetime="2019-05-23T11:38:54+08:00">2019-05-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Hexo-Next/" itemprop="url" rel="index"><span itemprop="name">Hexo Next</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>博客里需要添加很多图片作为内容的补充，但是把图片放在本地博客文件夹里，上传到网上后，加载这些图片就是一个很大的问题，他们会拖累网页加载的速度，所以建议把图片放图床里，通过外链来访问和加载这些图片。</p>
<h1 id="云对象储存服务商"><a href="#云对象储存服务商" class="headerlink" title="云对象储存服务商"></a>云对象储存服务商</h1><p>国内免费的云对象储存的服务商(网易云、七牛云、腾讯云)</p>
<h2 id="1-网易云"><a href="#1-网易云" class="headerlink" title="1.网易云"></a>1.网易云</h2><p>官网：<a target="_blank" rel="noopener" href="https://www.163yun.com/">https://www.163yun.com/</a></p>
<p>网易NOS（Netease Object Storage）网易对象存储为你提供基于互联网的数据存取服务，通过使用 NOS，你可以随时通过网络将你的文本、图片、音视频等各类文件存储到 NOS 系统中，并随时可以通过网络进行安全访问。</p>
<p>NOS 对象存储从三个维度进行计量收费：存储容量、流量、接口调用次数。存储容量0-50 GB是免费，下载流量在0-20 GB免费，每月前 10 万次 Put 请求免费，每月前 100 万次 Get 请求免费。</p>
<h2 id="2-七牛云"><a href="#2-七牛云" class="headerlink" title="2.七牛云"></a>2.七牛云</h2><p>官网：<a target="_blank" rel="noopener" href="https://www.qiniu.com/">https://www.qiniu.com/</a></p>
<p>七牛云存储提供云存储、云处理、云加速分发一站式服务，注册成为标准用户后可获得10GB免费存储空间、每月10GB下载流量、每月10万次Put请求、每月100万次Get请求。</p>
<p>缺点：<br>临时域名仅有三个月，三个月后没有自己的备案域名，所有图片均会失效</p>
<h2 id="3-腾讯云"><a href="#3-腾讯云" class="headerlink" title="3.腾讯云"></a>3.腾讯云</h2><p>官网：<a target="_blank" rel="noopener" href="https://cloud.tencent.com/">https://cloud.tencent.com/</a></p>
<p>腾讯云对象存储服务COS，全称为Cloud Object Service，主要是为开发者提供安全、稳定、高效、实惠的对象存储服务，开发者可以将任意动态、静态生成的数据，存放到COS上，再通过HTTP的方式进行访问。</p>
<p>缺点：<br>自2019年后新建用户可以领取一个6月有效期，50G的存储量。6月过后，按照存储量和流量收费。</p>
<h1 id="在线图床选择"><a href="#在线图床选择" class="headerlink" title="在线图床选择"></a>在线图床选择</h1><p><a target="_blank" rel="noopener" href="https://sm.ms/">https://sm.ms</a> SM图床</p>
<p><a target="_blank" rel="noopener" href="https://tu.aixinxi.net/">https://tu.aixinxi.net/</a> 爱信息图床</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/">https://imgchr.com/</a> 路过图床</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>云储存选择<code>网易云</code>，因为网易云对新用户的限制，免费的云储存有待选择</p>
<p>图床选择<code>路过图床</code></p>
<p>目前还在用路过图床，缺点是图片链接不能看到任何图片名称等图片信息，不方便插入在博客里</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://vic.kim/2019/05/23/Hexo%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%8B%E6%A0%87%E7%AD%BE%E4%BA%91%E5%8F%8A%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/smile.jpg">
      <meta itemprop="name" content="Vic">
      <meta itemprop="description" content="人生苦短，我学Python">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Vicの博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/05/23/Hexo%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%8B%E6%A0%87%E7%AD%BE%E4%BA%91%E5%8F%8A%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA/" class="post-title-link" itemprop="url">Hexo博客建立标签云及效果展示</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2019-05-23 10:58:32 / 修改时间：11:23:30" itemprop="dateCreated datePublished" datetime="2019-05-23T10:58:32+08:00">2019-05-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Hexo-Next/" itemprop="url" rel="index"><span itemprop="name">Hexo Next</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="hexo-tag-cloud插件介绍"><a href="#hexo-tag-cloud插件介绍" class="headerlink" title="hexo-tag-cloud插件介绍"></a>hexo-tag-cloud插件介绍</h1><p>hexo-tag-cloud插件是作者写的一个Hexo博客的标签云插件，旨在直观的展示标签的种类，美观大方且非常优雅。</p>
<ul>
<li><p>插件地址：<br><a target="_blank" rel="noopener" href="https://github.com/MikeCoder/hexo-tag-cloud">插件的GitHub地址</a></p>
</li>
<li><p>插件说明：<br><a target="_blank" rel="noopener" href="https://github.com/MikeCoder/hexo-tag-cloud/blob/master/README.ZH.md">说明地址</a></p>
</li>
<li><p>标签云效果展示：<br><a href="https://vic.kim/">我的博客主页</a><br><a target="_blank" rel="noopener" href="https://mikecoder.github.io/archives/">插件作者提供的效果预览</a></p>
</li>
</ul>
<h1 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h1><p>进入到 hexo 的根目录，然后在 <code>package.json</code> 中添加依赖: <code>&quot;hexo-tag-cloud&quot;: &quot;2.1.*&quot;</code></p>
<h2 id="使用命令行进行安装"><a href="#使用命令行进行安装" class="headerlink" title="使用命令行进行安装"></a>使用命令行进行安装</h2><p><code>npm install</code></p>
<h2 id="Git-clone-下载"><a href="#Git-clone-下载" class="headerlink" title="Git clone 下载"></a>Git clone 下载</h2><p>使用命令行安装插件包的过程中可能会出现问题，安装失败，安装不完全。可以直接克隆插件到博客的插件文件夹blog/node_modules里。或者克隆到桌面，复制到博客的插件文件夹blog/node_modules里。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/MikeCoder/</span>hexo-tag-cloud</span><br></pre></td></tr></table></figure>

<h1 id="配置插件"><a href="#配置插件" class="headerlink" title="配置插件"></a>配置插件</h1><p>插件的配置需要对应的环境，可以在主题文件夹里找一下，有没有对应的渲染文件，然后根据渲染文件的类型，选择对应的插件配置方法。</p>
<p>##swig 用户 (Next主题为例)<br>在主题文件夹找到文件 theme/next/layout/_macro/sidebar.swig, 然后添加如下代码：</p>
<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="name">if</span></span> site.tags.length &gt; 1 %&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/js/tagcloud.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/js/tagcanvas.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;widget-wrap&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;widget-title&quot;</span>&gt;</span>Tag Cloud<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;myCanvasContainer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;widget tagcloud&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">width</span>=<span class="string">&quot;250&quot;</span> <span class="attr">height</span>=<span class="string">&quot;250&quot;</span> <span class="attr">id</span>=<span class="string">&quot;resCanvas&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width=100%&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">            </span><span class="template-variable">&#123;&#123; list_tags() &#125;&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="template-tag">&#123;% <span class="name"><span class="name">endif</span></span> %&#125;</span></span><br></pre></td></tr></table></figure>
<p>代码添加到后面即可，添加示意图如下:<br><img src="/2019/05/23/Hexo%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%8B%E6%A0%87%E7%AD%BE%E4%BA%91%E5%8F%8A%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA/WechatIMG135.png"></p>
<h2 id="对于ejs的用户-默认主题landscape为例"><a href="#对于ejs的用户-默认主题landscape为例" class="headerlink" title="对于ejs的用户 (默认主题landscape为例)"></a>对于ejs的用户 (默认主题landscape为例)</h2><p>在主题文件夹找到文件hexo/themes/landscape/layout/_widget/tagcloud.ejs,将这个文件修改如下：</p>
<figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">&lt;%</span><span class="ruby"> <span class="keyword">if</span> (site.tags.length) &#123; </span><span class="xml">%&gt;</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&lt;%-</span></span></span><span class="ruby"> url_for(<span class="string">&#x27;/js/tagcloud.js&#x27;</span>) </span><span class="xml"><span class="tag"><span class="string">%&gt;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&lt;%-</span></span></span><span class="ruby"> url_for(<span class="string">&#x27;/js/tagcanvas.js&#x27;</span>) </span><span class="xml"><span class="tag"><span class="string">%&gt;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;widget-wrap&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;widget-title&quot;</span>&gt;</span>&lt;%=</span><span class="ruby"> __(<span class="string">&#x27;tagcloud&#x27;</span>) </span><span class="xml">%&gt;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;myCanvasContainer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;widget tagcloud&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">width</span>=<span class="string">&quot;250&quot;</span> <span class="attr">height</span>=<span class="string">&quot;250&quot;</span> <span class="attr">id</span>=<span class="string">&quot;resCanvas&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width=100%&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &lt;%-</span><span class="ruby"> tagcloud() </span><span class="xml">%&gt;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">&lt;%</span><span class="ruby"> &#125; </span><span class="xml">%&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="对于jade用户-Apollo主题为例"><a href="#对于jade用户-Apollo主题为例" class="headerlink" title="对于jade用户 (Apollo主题为例)"></a>对于jade用户 (Apollo主题为例)</h2><p>找到 apollo/layout/archive.jade 文件，并且把 container 代码块修改为如下内容:</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">block container</span><br><span class="line">    include mixins/post</span><br><span class="line">    .archive</span><br><span class="line">        h2(<span class="attribute">class</span>=<span class="string">&#x27;archive-year&#x27;</span>)= <span class="string">&#x27;Tag Cloud&#x27;</span></span><br><span class="line">        script(<span class="attribute">type</span>=<span class="string">&#x27;text/javascript&#x27;</span>, <span class="attribute">charset</span>=<span class="string">&#x27;utf-8&#x27;</span>, <span class="attribute">src</span>=url_for(&quot;/js/tagcloud.js&quot;))</span><br><span class="line">        script(<span class="attribute">type</span>=<span class="string">&#x27;text/javascript&#x27;</span>, <span class="attribute">charset</span>=<span class="string">&#x27;utf-8&#x27;</span>, <span class="attribute">src</span>=url_for(&quot;/js/tagcanvas.js&quot;))</span><br><span class="line"></span><br><span class="line">        #myCanvasContainer.widget.tagcloud(<span class="attribute">align</span>=<span class="string">&#x27;center&#x27;</span>)</span><br><span class="line">            canvas#resCanvas(<span class="attribute">width</span>=<span class="string">&#x27;500&#x27;</span>, <span class="attribute">height</span>=<span class="string">&#x27;500&#x27;</span>, <span class="attribute">style</span>=<span class="string">&#x27;width=100%&#x27;</span>)</span><br><span class="line">                !=tagcloud()</span><br><span class="line">            !=tagcloud()</span><br><span class="line">    +postList()</span><br></pre></td></tr></table></figure>

<h1 id="主题配置"><a href="#主题配置" class="headerlink" title="主题配置"></a>主题配置</h1><p>在博客根目录，找到 _config.yml配置文件然后在最后添加如下的配置项，可以自定义标签云的字体和颜色，还有突出高亮:</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo-tag-cloud</span></span><br><span class="line"><span class="attribute">tag_cloud</span>:</span><br><span class="line">    <span class="attribute">textFont</span>: Trebuchet MS, Helvetica</span><br><span class="line">    <span class="attribute">textColor</span>: &#x27;#<span class="number">333</span>&#x27;</span><br><span class="line">    <span class="attribute">textHeight</span>: <span class="number">25</span></span><br><span class="line">    <span class="attribute">outlineColor</span>: &#x27;#E<span class="number">2</span>E<span class="number">1</span>D<span class="number">1</span>&#x27;</span><br><span class="line">    <span class="attribute">maxSpeed</span>: <span class="number">0</span>.<span class="number">1</span></span><br></pre></td></tr></table></figure>

<h1 id="效果预览"><a href="#效果预览" class="headerlink" title="效果预览"></a>效果预览</h1><p>本地预览<br><code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</code><br>推荐使用 &amp;&amp; 作为组合命令的串联符号</p>
<p>构建<br><code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</code></p>
<p>参考文章：<a target="_blank" rel="noopener" href="https://github.com/MikeCoder/hexo-tag-cloud/blob/master/README.ZH.md">Hexo Tag Cloud</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/archives/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/archives/">1</a><span class="page-number current">2</span><a class="page-number" href="/archives/page/3/">3</a><a class="page-number" href="/archives/page/4/">4</a><a class="extend next" rel="next" href="/archives/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>


<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Vic</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div><script color="0,0,255" opacity="0.5" zIndex="-1" count="99" src="https://cdn.jsdelivr.net/npm/canvas-nest.js@1/dist/canvas-nest.js"></script>


    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="/js/local-search.js"></script>






  






  <!-- 页面点击小红心 -->
  

</body>
</html>
